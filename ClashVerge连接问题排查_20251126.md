# 🔧 Clash Verge 连接问题排查（2025-11-26）

## ❌ 问题

Safari 无法打开 Google，提示"无法与服务器建立安全连接"。

---

## 🔍 排查步骤

### 步骤1：确认 Clash Verge 本地代理端口

Clash Verge 应该在本地监听 7890 端口（HTTP）和 7891 端口（SOCKS5）。

**检查方法**：
1. **在终端运行**：
   ```bash
   lsof -i :7890
   ```
2. **如果看到 Clash Verge 进程，说明端口正在监听**

### 步骤2：测试本地代理

在终端运行：

```bash
curl -x http://127.0.0.1:7890 -I https://www.google.com
```

如果返回 200 或 302，说明 Clash Verge 本地代理工作正常。

### 步骤3：确认系统代理设置

1. **系统设置 → 网络**
2. **选择当前网络连接**
3. **点击"高级"**
4. **查看"代理"标签**
5. **确认 HTTP 代理已配置**：
   - 服务器：127.0.0.1 或 localhost
   - 端口：7890

---

## ✅ 解决方案

### 方法1：重新启动 Clash Verge

1. **完全退出 Clash Verge**（右键点击菜单栏图标 → 退出）
2. **重新启动 Clash Verge**
3. **选择 `hongkong` 配置**
4. **选择 "Proxy" 代理组**
5. **开启系统代理**
6. **等待几秒，让代理启动**
7. **重新测试访问 Google**

### 方法2：检查 Clash Verge 日志

1. **在 Clash Verge 中查看日志**（如果有日志标签）
2. **查看是否有错误信息**
3. **根据错误信息排查问题**

### 方法3：手动设置系统代理

如果 Clash Verge 的系统代理功能不工作，可以手动设置：

1. **系统设置 → 网络**
2. **选择当前网络连接**
3. **点击"高级"**
4. **切换到"代理"标签**
5. **勾选"网页代理（HTTP）"**
6. **填写**：
   - 服务器：127.0.0.1
   - 端口：7890
7. **保存**

### 方法4：尝试使用 SOCKS5 代理

如果 HTTP 代理不工作，可以尝试 SOCKS5：

1. **系统设置 → 网络 → 高级 → 代理**
2. **勾选"SOCKS 代理"**
3. **填写**：
   - 服务器：127.0.0.1
   - 端口：7891
4. **保存**

---

## 🔍 常见问题

### 问题1：Clash Verge 本地端口未监听

**解决**：
- 重新启动 Clash Verge
- 确认配置已选择并加载

### 问题2：系统代理未正确设置

**解决**：
- 手动设置系统代理
- 或重新开启 Clash Verge 的系统代理功能

### 问题3：代理服务器连接失败

**解决**：
- 检查香港服务器是否正常运行
- 检查 Squid 代理是否正常运行

---

## 📝 检查清单

- [ ] Clash Verge 已启动
- [ ] 已选择 `hongkong` 配置
- [ ] 已选择 "Proxy" 代理组
- [ ] 系统代理已开启
- [ ] 本地代理端口正在监听（7890）
- [ ] 系统代理设置正确（127.0.0.1:7890）

---

## 🎯 现在请操作

1. **重新启动 Clash Verge**
2. **确认系统代理已开启**
3. **在终端测试本地代理**：`curl -x http://127.0.0.1:7890 -I https://www.google.com`
4. **如果本地代理可以访问，检查系统代理设置**

如果还是不行，告诉我测试结果，我可以进一步排查。

---

**最后更新**：2025-11-26








