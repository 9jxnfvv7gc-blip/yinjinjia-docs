# è‡ªåŠ¨æ·»åŠ è°ƒè¯•ä¿¡æ¯å‘½ä»¤

## ğŸš€ æœ€ç®€å•çš„æ–¹æ³•ï¼šä½¿ç”¨å‘½ä»¤è‡ªåŠ¨æ·»åŠ 

### åœ¨Workbenchç»ˆç«¯æ‰§è¡Œï¼ˆé€€å‡ºnanoåï¼‰ï¼š

```bash
cd /root/video_server

# å¤‡ä»½åŸæ–‡ä»¶
cp video_server.py video_server.py.bak

# åœ¨ç¬¬626è¡Œä¹‹åæ·»åŠ è°ƒè¯•ä¿¡æ¯ï¼ˆåœ¨category_path = os.path.join(VIDEO_ROOT, category)ä¹‹åï¼‰
sed -i '626a\            # è°ƒè¯•ä¿¡æ¯\n            print(f"APIåˆ—è¡¨è¯·æ±‚: category={category}, category_path={category_path}")\n            print(f"VIDEO_ROOT: {VIDEO_ROOT}")\n            print(f"è·¯å¾„å­˜åœ¨: {os.path.exists(category_path)}")' video_server.py

# åœ¨ç¬¬638è¡Œä¹‹åæ·»åŠ ï¼ˆåœ¨if os.path.exists(category_path):ä¹‹åï¼‰
sed -i '639a\                print(f"ç›®å½•å­˜åœ¨ï¼Œå¼€å§‹æ‰«ææ–‡ä»¶...")' video_server.py

# åœ¨ç¬¬644è¡Œä¹‹åæ·»åŠ ï¼ˆåœ¨if ext in all_media_extensions:ä¹‹å‰ï¼‰
sed -i '644a\                        print(f"æ–‡ä»¶: {f}, æ‰©å±•å: {ext}, åœ¨åˆ—è¡¨ä¸­: {ext in all_media_extensions}")' video_server.py

# åœ¨ç¬¬676è¡Œä¹‹åæ·»åŠ ï¼ˆåœ¨file_list.appendå¾ªç¯ç»“æŸåï¼‰
sed -i '677a\                print(f"æ‰¾åˆ° {len(file_list)} ä¸ªæ–‡ä»¶")' video_server.py

# éªŒè¯ä¿®æ”¹
grep -n "è°ƒè¯•ä¿¡æ¯\|ç›®å½•å­˜åœ¨\|æ–‡ä»¶:" video_server.py
```

---

## ğŸ“‹ æ“ä½œæ­¥éª¤

### æ­¥éª¤1ï¼šé€€å‡ºnanoç¼–è¾‘å™¨

åœ¨nanoç¼–è¾‘å™¨ä¸­ï¼š
- æŒ‰ `Ctrl+X` é€€å‡ºï¼ˆä¸ä¿å­˜ï¼‰
- å¦‚æœæç¤ºä¿å­˜ï¼ŒæŒ‰ `N`ï¼ˆä¸ä¿å­˜ï¼‰

---

### æ­¥éª¤2ï¼šæ‰§è¡Œè‡ªåŠ¨æ·»åŠ å‘½ä»¤

åœ¨Workbenchç»ˆç«¯æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ã€‚

---

### æ­¥éª¤3ï¼šéªŒè¯ä¿®æ”¹

```bash
# æŸ¥çœ‹ä¿®æ”¹åçš„ä»£ç 
grep -A 5 "è°ƒè¯•ä¿¡æ¯" video_server.py
```

---

### æ­¥éª¤4ï¼šé‡å¯æœåŠ¡å™¨

```bash
# é‡å¯æœåŠ¡å™¨
systemctl restart video-server

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status video-server
```

---

### æ­¥éª¤5ï¼šæŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
journalctl -u video-server -f
```

ç„¶åè®¿é—®APIï¼ˆåœ¨å¦ä¸€ä¸ªç»ˆç«¯ï¼‰ï¼š
```bash
curl http://localhost:8081/api/list/åŸåˆ›è§†é¢‘
```

---

## ğŸ¯ ç°åœ¨å¯ä»¥æ‰§è¡Œ

1. **é€€å‡ºnano**ï¼ˆæŒ‰ `Ctrl+X`ï¼Œç„¶åæŒ‰ `N` ä¸ä¿å­˜ï¼‰
2. **æ‰§è¡Œè‡ªåŠ¨æ·»åŠ å‘½ä»¤**ï¼ˆå¤åˆ¶ä¸Šé¢çš„å‘½ä»¤åˆ°ç»ˆç«¯æ‰§è¡Œï¼‰
3. **é‡å¯æœåŠ¡å™¨**ï¼ˆ`systemctl restart video-server`ï¼‰
4. **æŸ¥çœ‹æ—¥å¿—**ï¼ˆ`journalctl -u video-server -f`ï¼‰

---

**å…ˆé€€å‡ºnanoï¼Œç„¶åæ‰§è¡Œè‡ªåŠ¨æ·»åŠ å‘½ä»¤ï¼** ğŸš€

