# æœ€ç»ˆä¿®å¤æ­¥éª¤

## âŒ é—®é¢˜

1. **VIDEO_ROOTè¿˜æ˜¯`/Volumes/Expansion`**ï¼Œéœ€è¦æ”¹ä¸º`/root/videos`
2. **ç«¯å£è¢«å ç”¨**ï¼Œéœ€è¦å…ˆåœæ­¢æ‰€æœ‰è¿›ç¨‹

---

## ğŸ”§ ä¿®å¤æ­¥éª¤

### åœ¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
# 1. åœæ­¢æ‰€æœ‰æœåŠ¡å™¨è¿›ç¨‹
pkill -f video_server.py
systemctl stop video-server
sleep 2

# 2. ç¡®è®¤æ²¡æœ‰è¿›ç¨‹åœ¨è¿è¡Œ
ps aux | grep video_server.py

# 3. ä¿®æ”¹VIDEO_ROOTï¼ˆç¬¬20è¡Œï¼‰
sed -i '20s|VIDEO_ROOT = "/Volumes/Expansion"|VIDEO_ROOT = "/root/videos"|g' /root/video_server/video_server.py

# 4. ç¡®è®¤ä¿®æ”¹
grep -n "VIDEO_ROOT" /root/video_server/video_server.py | head -1

# 5. æ£€æŸ¥è¯­æ³•
python3 -m py_compile /root/video_server/video_server.py && echo "âœ… è¯­æ³•æ£€æŸ¥é€šè¿‡" || echo "âŒ è¯­æ³•é”™è¯¯"

# 6. é‡æ–°å¯åŠ¨æœåŠ¡å™¨
cd /root/video_server
python3 video_server.py > /tmp/video_server.log 2>&1 &
sleep 3

# 7. æµ‹è¯•API
curl "http://localhost:8081/api/list/$(python3 -c "from urllib.parse import quote; print(quote('åŸåˆ›è§†é¢‘'))")" | python3 -m json.tool

# 8. æŸ¥çœ‹æ—¥å¿—ï¼ˆç¡®è®¤VIDEO_ROOTå’ŒURLæ ¼å¼ï¼‰
cat /tmp/video_server.log | tail -20
```

---

## ğŸ“‹ æ‰§è¡Œå

åº”è¯¥çœ‹åˆ°ï¼š
- `VIDEO_ROOT: /root/videos`
- `è·¯å¾„å­˜åœ¨: True`
- APIè¿”å›æ­£ç¡®çš„JSONï¼ŒURLæ ¼å¼ä¸ºï¼š`http://47.243.177.166:8081/video/åŸåˆ›è§†é¢‘/1.mp4`

---

**å…ˆæ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼ŒæŠŠç»“æœå‘ç»™æˆ‘ï¼** ğŸ”§

