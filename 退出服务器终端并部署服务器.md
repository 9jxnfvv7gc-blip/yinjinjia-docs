# é€€å‡ºæœåŠ¡å™¨ç»ˆç«¯å¹¶éƒ¨ç½²æœåŠ¡å™¨

## âŒ é—®é¢˜ï¼šæœåŠ¡å™¨ç»ˆç«¯æ— æ³•è¾“å…¥æ–°å‘½ä»¤

**åŽŸå› **ï¼šå¯èƒ½æœ‰è¿›ç¨‹æ­£åœ¨è¿è¡Œï¼ˆå¦‚ä¹‹å‰çš„æž„å»ºæˆ–æœåŠ¡å™¨ï¼‰ï¼Œå ç”¨äº†ç»ˆç«¯ã€‚

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ³•1ï¼šä¸­æ–­å½“å‰è¿›ç¨‹

#### åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯ï¼š

1. **æŒ‰ `Ctrl+C`**ï¼šä¸­æ–­å½“å‰è¿è¡Œçš„è¿›ç¨‹
2. **å¦‚æžœè¿˜æ˜¯ä¸è¡Œ**ï¼šæŒ‰ `Ctrl+Z`ï¼ˆæš‚åœè¿›ç¨‹ï¼‰

---

### æ–¹æ³•2ï¼šæ‰“å¼€æ–°çš„ç»ˆç«¯çª—å£

#### åœ¨Workbenchä¸­ï¼š

1. **å…³é—­å½“å‰ç»ˆç«¯æ ‡ç­¾é¡µ**
2. **æ‰“å¼€æ–°çš„ç»ˆç«¯æ ‡ç­¾é¡µ**
3. **åœ¨æ–°çš„ç»ˆç«¯ä¸­æ‰§è¡Œå‘½ä»¤**

---

### æ–¹æ³•3ï¼šå¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹

#### åœ¨æ–°çš„ç»ˆç«¯ä¸­æ‰§è¡Œï¼š

```bash
# æŸ¥æ‰¾å ç”¨ç»ˆç«¯çš„è¿›ç¨‹
ps aux | grep -E "flutter|gradle|python" | grep -v grep

# å¦‚æžœæ‰¾åˆ°è¿›ç¨‹ï¼Œè®°å½•PIDï¼Œç„¶åŽç»ˆæ­¢
# kill PID

# æˆ–å¼ºåˆ¶ç»ˆæ­¢æ‰€æœ‰ç›¸å…³è¿›ç¨‹
pkill -f "flutter build"
pkill -f "gradle"
```

---

## ðŸš€ éƒ¨ç½²æœåŠ¡å™¨æ­¥éª¤

### æ­¥éª¤1ï¼šç¡®ä¿ç»ˆç«¯å¯ç”¨

**å¦‚æžœç»ˆç«¯è¢«å ç”¨**ï¼š
- æŒ‰ `Ctrl+C` ä¸­æ–­
- æˆ–æ‰“å¼€æ–°çš„ç»ˆç«¯çª—å£

---

### æ­¥éª¤2ï¼šåœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºç›®å½•

åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
# åˆ›å»ºè§†é¢‘å­˜å‚¨ç›®å½•
mkdir -p /root/videos/åŽŸåˆ›è§†é¢‘
mkdir -p /root/videos/åŽŸåˆ›æ­Œæ›²

# åˆ›å»ºæœåŠ¡å™¨ç›®å½•
mkdir -p /root/video_server
```

---

### æ­¥éª¤3ï¼šä¸Šä¼ video_server.py

#### æ–¹æ³•Aï¼šä½¿ç”¨Workbenchæ–‡ä»¶ä¸Šä¼ ï¼ˆæŽ¨èï¼‰

1. **åœ¨Workbenchä¸­ä½¿ç”¨æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½**
2. **ä¸Šä¼  `video_server.py` åˆ° `/root/video_server/`**

#### æ–¹æ³•Bï¼šä½¿ç”¨scpï¼ˆå¦‚æžœSSHå¯ç”¨ï¼‰

åœ¨æœ¬åœ°Macç»ˆç«¯æ‰§è¡Œï¼š

```bash
scp /Volumes/Expansion/FlutterProjects/æ¡Œé¢å½±éŸ³æ’­æ”¾å™¨_å®‰è£…åŒ…_20251121_165905/video_server.py root@47.243.177.166:/root/video_server/
```

---

### æ­¥éª¤4ï¼šä¿®æ”¹æœåŠ¡å™¨é…ç½®

åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /root/video_server

# ä¿®æ”¹VIDEO_ROOTä¸ºæœåŠ¡å™¨è·¯å¾„
sed -i 's|VIDEO_ROOT = "/Volumes/Expansion"|VIDEO_ROOT = "/root/videos"|g' video_server.py

# éªŒè¯ä¿®æ”¹
grep "VIDEO_ROOT" video_server.py
```

**åº”è¯¥æ˜¾ç¤º**ï¼š`VIDEO_ROOT = "/root/videos"`

---

### æ­¥éª¤5ï¼šå¯åŠ¨æœåŠ¡å™¨

#### æ–¹æ³•1ï¼šç›´æŽ¥è¿è¡Œï¼ˆæµ‹è¯•ç”¨ï¼‰

```bash
cd /root/video_server
python3 video_server.py
```

**çœ‹åˆ° "Serving at port 8081" è¯´æ˜ŽæœåŠ¡å™¨å·²å¯åŠ¨**

**ä¿æŒè¿™ä¸ªç»ˆç«¯çª—å£æ‰“å¼€**

---

#### æ–¹æ³•2ï¼šä½¿ç”¨systemdæœåŠ¡ï¼ˆæŽ¨èï¼Œè‡ªåŠ¨å¯åŠ¨ï¼‰

åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
# åˆ›å»ºsystemdæœåŠ¡æ–‡ä»¶
cat > /etc/systemd/system/video-server.service << 'EOF'
[Unit]
Description=Video Server
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/video_server
ExecStart=/usr/bin/python3 /root/video_server/video_server.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# é‡æ–°åŠ è½½systemd
systemctl daemon-reload

# å¯ç”¨æœåŠ¡ï¼ˆå¼€æœºè‡ªå¯ï¼‰
systemctl enable video-server

# å¯åŠ¨æœåŠ¡
systemctl start video-server

# æŸ¥çœ‹çŠ¶æ€
systemctl status video-server
```

**å¦‚æžœçœ‹åˆ° "active (running)" è¯´æ˜ŽæœåŠ¡å·²å¯åŠ¨**

---

### æ­¥éª¤6ï¼šæµ‹è¯•æœåŠ¡å™¨

åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
# æµ‹è¯•API
curl http://localhost:8081/api/list/åŽŸåˆ›è§†é¢‘
```

**åº”è¯¥è¿”å›ž**ï¼š`[]`ï¼ˆç©ºæ•°ç»„ï¼Œå› ä¸ºæ²¡æœ‰å†…å®¹ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼‰

---

## ðŸ“‹ å®Œæ•´æ“ä½œæµç¨‹

### 1. é€€å‡ºå½“å‰è¿›ç¨‹

**åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯**ï¼š
- æŒ‰ `Ctrl+C` ä¸­æ–­å½“å‰è¿›ç¨‹
- æˆ–æ‰“å¼€æ–°çš„ç»ˆç«¯çª—å£

### 2. åˆ›å»ºç›®å½•

```bash
mkdir -p /root/videos/åŽŸåˆ›è§†é¢‘
mkdir -p /root/videos/åŽŸåˆ›æ­Œæ›²
mkdir -p /root/video_server
```

### 3. ä¸Šä¼ video_server.py

**ä½¿ç”¨Workbenchæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½**

### 4. ä¿®æ”¹é…ç½®

```bash
cd /root/video_server
sed -i 's|VIDEO_ROOT = "/Volumes/Expansion"|VIDEO_ROOT = "/root/videos"|g' video_server.py
```

### 5. å¯åŠ¨æœåŠ¡å™¨

```bash
# ç›´æŽ¥è¿è¡Œ
python3 video_server.py

# æˆ–ä½¿ç”¨systemdæœåŠ¡
systemctl start video-server
```

---

## ðŸ’¡ é‡è¦æç¤º

### å…³äºŽç»ˆç«¯ï¼š

1. **å¦‚æžœæ— æ³•è¾“å…¥**ï¼šæŒ‰ `Ctrl+C` ä¸­æ–­å½“å‰è¿›ç¨‹
2. **å¦‚æžœè¿˜æ˜¯ä¸è¡Œ**ï¼šæ‰“å¼€æ–°çš„ç»ˆç«¯çª—å£
3. **ä½¿ç”¨systemdæœåŠ¡**ï¼šæœåŠ¡å™¨ä¼šåœ¨åŽå°è¿è¡Œï¼Œä¸éœ€è¦ä¿æŒç»ˆç«¯æ‰“å¼€

### å…³äºŽæœåŠ¡å™¨ï¼š

1. **å³ä½¿æ²¡æœ‰å†…å®¹ä¹Ÿå¯ä»¥è¿è¡Œ**ï¼šæœåŠ¡å™¨ä¼šè¿”å›žç©ºåˆ—è¡¨
2. **ä½¿ç”¨systemdæœåŠ¡**ï¼šæœåŠ¡å™¨ä¼šè‡ªåŠ¨å¯åŠ¨ï¼Œé‡å¯åŽä¹Ÿä¼šè‡ªåŠ¨è¿è¡Œ
3. **æµ‹è¯•è¿žæŽ¥**ï¼šä½¿ç”¨ `curl http://localhost:8081` æµ‹è¯•

---

## ðŸŽ¯ æŽ¨èæ“ä½œ

### çŽ°åœ¨å¯ä»¥ï¼š

1. **æŒ‰ `Ctrl+C` é€€å‡ºå½“å‰è¿›ç¨‹**ï¼ˆæˆ–æ‰“å¼€æ–°ç»ˆç«¯ï¼‰
2. **åˆ›å»ºç›®å½•**ï¼š`mkdir -p /root/videos/åŽŸåˆ›è§†é¢‘ /root/videos/åŽŸåˆ›æ­Œæ›² /root/video_server`
3. **ä¸Šä¼ video_server.py**ï¼ˆä½¿ç”¨Workbenchæ–‡ä»¶ä¸Šä¼ ï¼‰
4. **ä¿®æ”¹é…ç½®å¹¶å¯åŠ¨æœåŠ¡å™¨**

---

**å…ˆæŒ‰ `Ctrl+C` é€€å‡ºå½“å‰è¿›ç¨‹ï¼Œç„¶åŽæŒ‰ç…§æ­¥éª¤éƒ¨ç½²æœåŠ¡å™¨ï¼** ðŸš€

