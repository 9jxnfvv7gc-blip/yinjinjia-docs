# ğŸ”§ æœåŠ¡å™¨ç¼–è¯‘ç½‘ç»œé—®é¢˜è§£å†³

## âŒ å½“å‰é—®é¢˜

ç¼–è¯‘å¤±è´¥ï¼Œé”™è¯¯ï¼š
```
java.net.ConnectException: Connection refused
```

è¿™æ˜¯ç½‘ç»œè¿æ¥é—®é¢˜ï¼ŒGradleæ— æ³•ä¸‹è½½ä¾èµ–ã€‚

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šæ£€æŸ¥å¹¶ä¿®å¤Gradleé…ç½®

åœ¨æœåŠ¡å™¨ä¸Šæ£€æŸ¥ `android/gradle.properties`ï¼š

```bash
cd /root/app
cat android/gradle.properties
```

å¦‚æœçœ‹åˆ°ä»£ç†é…ç½®ï¼ˆå¦‚ `127.0.0.1:7890`ï¼‰ï¼Œéœ€è¦ï¼š
1. **æ³¨é‡Šæ‰ä»£ç†é…ç½®**ï¼ˆå¦‚æœä»£ç†æœªè¿è¡Œï¼‰
2. **æˆ–å¯åŠ¨ä»£ç†**ï¼ˆå¦‚æœéœ€è¦ä»£ç†ï¼‰

### æ–¹æ¡ˆ2ï¼šä½¿ç”¨æœ¬åœ°Gradleï¼ˆå¦‚æœå·²å®‰è£…ï¼‰

å¦‚æœæœåŠ¡å™¨ä¸Šå·²æœ‰Gradleï¼Œå¯ä»¥ï¼š

```bash
cd /root/app/android
# ä½¿ç”¨æœ¬åœ°Gradle
/path/to/gradle/bin/gradle assembleDebug
```

### æ–¹æ¡ˆ3ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥

```bash
# æµ‹è¯•ç½‘ç»œè¿æ¥
ping storage.googleapis.com
ping dl.google.com

# æ£€æŸ¥ä»£ç†
echo $http_proxy
echo $https_proxy
```

### æ–¹æ¡ˆ4ï¼šä¿®æ”¹Gradleé…ç½®ä½¿ç”¨å›½å†…é•œåƒ

ç¼–è¾‘ `/root/app/android/gradle.properties`ï¼Œæ·»åŠ ï¼š

```properties
# ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒ
systemProp.http.proxyHost=
systemProp.http.proxyPort=
systemProp.https.proxyHost=
systemProp.https.proxyPort=
```

### æ–¹æ¡ˆ5ï¼šæ£€æŸ¥build.gradle.ktsä¸­çš„ä»“åº“é…ç½®

ç¡®ä¿ä½¿ç”¨å›½å†…é•œåƒï¼ˆé˜¿é‡Œäº‘ï¼‰ï¼Œæ£€æŸ¥ `/root/app/android/build.gradle.kts` å’Œ `settings.gradle.kts`ã€‚

## ğŸš€ å¿«é€Ÿä¿®å¤æ­¥éª¤

### åœ¨æœåŠ¡å™¨ä¸Šï¼š

```bash
cd /root/app

# 1. æ£€æŸ¥gradle.properties
cat android/gradle.properties

# 2. å¦‚æœçœ‹åˆ°ä»£ç†é…ç½®ï¼Œæ³¨é‡Šæ‰
# ç¼–è¾‘æ–‡ä»¶ï¼Œæ³¨é‡Šæ‰ä»£ç†è¡Œ
nano android/gradle.properties
# æˆ–
vi android/gradle.properties

# 3. é‡æ–°ç¼–è¯‘
flutter build apk --debug
```

## ğŸ“ å¦‚æœè¿˜æ˜¯å¤±è´¥

å¯ä»¥å°è¯•ï¼š

1. **æ¸…ç†ç¼“å­˜**ï¼š
   ```bash
   cd /root/app
   flutter clean
   rm -rf android/.gradle
   flutter pub get
   flutter build apk --debug
   ```

2. **æ£€æŸ¥Flutterç¯å¢ƒ**ï¼š
   ```bash
   flutter doctor -v
   ```

3. **ä½¿ç”¨Releaseç‰ˆæœ¬**ï¼ˆæœ‰æ—¶æ›´ç¨³å®šï¼‰ï¼š
   ```bash
   flutter build apk --release
   ```

---

**è¯·å…ˆæ£€æŸ¥å¹¶ä¿®å¤gradle.propertiesä¸­çš„ä»£ç†é…ç½®ï¼**


