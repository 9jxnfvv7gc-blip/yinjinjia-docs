# è°ƒè¯•ä¿¡æ¯å·²æ·»åŠ åçš„æ£€æŸ¥æ­¥éª¤

## âœ… å·²ç¡®è®¤

- âœ… è°ƒè¯•ä¿¡æ¯å·²æ·»åŠ ï¼ˆç¬¬644è¡Œï¼š`ç›®å½•å­˜åœ¨ï¼Œå¼€å§‹æ‰«ææ–‡ä»¶...`ï¼‰

---

## ğŸ” ç»§ç»­æ£€æŸ¥

### æ­¥éª¤1ï¼šæ£€æŸ¥å…¶ä»–è°ƒè¯•ä¿¡æ¯

åœ¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
# æ£€æŸ¥æ–‡ä»¶è°ƒè¯•ä¿¡æ¯
grep -n "æ–‡ä»¶: {f}, æ‰©å±•å:" /root/video_server/video_server.py

# æ£€æŸ¥æ‰¾åˆ°æ–‡ä»¶æ•°è°ƒè¯•ä¿¡æ¯
grep -n "æ‰¾åˆ° {len(file_list)}" /root/video_server/video_server.py
```

**åº”è¯¥æ˜¾ç¤º**ï¼šæ‰¾åˆ°è¿™2è¡Œä»£ç çš„è¡Œå·

---

### æ­¥éª¤2ï¼šæ£€æŸ¥è¯­æ³•

```bash
python3 -m py_compile /root/video_server/video_server.py
```

**å¦‚æœæ²¡æœ‰é”™è¯¯**ï¼Œè¯´æ˜è¯­æ³•æ­£ç¡®ã€‚

**å¦‚æœæœ‰é”™è¯¯**ï¼Œä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚

---

### æ­¥éª¤3ï¼šæ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€

```bash
systemctl status video-server
```

**åº”è¯¥æ˜¾ç¤º**ï¼š`active (running)` æˆ– `inactive (dead)`

---

### æ­¥éª¤4ï¼šå¦‚æœæœåŠ¡å™¨æœªå¯åŠ¨ï¼Œå¯åŠ¨å®ƒ

```bash
# å¯åŠ¨æœåŠ¡å™¨
systemctl start video-server

# æ£€æŸ¥çŠ¶æ€
systemctl status video-server
```

---

### æ­¥éª¤5ï¼šæµ‹è¯•API

```bash
# æµ‹è¯•API
curl http://localhost:8081/api/list/åŸåˆ›è§†é¢‘
```

**åº”è¯¥è¿”å›**ï¼šæ–‡ä»¶åˆ—è¡¨ï¼ˆä¸å†æ˜¯ç©ºæ•°ç»„ `[]`ï¼‰

---

### æ­¥éª¤6ï¼šæŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
journalctl -u video-server -f
```

ç„¶åè®¿é—®APIï¼ˆåœ¨å¦ä¸€ä¸ªç»ˆç«¯ï¼‰ï¼š
```bash
curl http://localhost:8081/api/list/åŸåˆ›è§†é¢‘
```

**åº”è¯¥çœ‹åˆ°è°ƒè¯•ä¿¡æ¯**ï¼š
- `APIåˆ—è¡¨è¯·æ±‚: category=åŸåˆ›è§†é¢‘, category_path=/root/videos/åŸåˆ›è§†é¢‘`
- `VIDEO_ROOT: /root/videos`
- `è·¯å¾„å­˜åœ¨: True`
- `ç›®å½•å­˜åœ¨ï¼Œå¼€å§‹æ‰«ææ–‡ä»¶...`
- `æ–‡ä»¶: 1.mp4, æ‰©å±•å: .mp4, åœ¨åˆ—è¡¨ä¸­: True`
- `æ‰¾åˆ° X ä¸ªæ–‡ä»¶`

---

## ğŸ¯ ç°åœ¨å¯ä»¥æ‰§è¡Œ

1. **æ£€æŸ¥å…¶ä»–è°ƒè¯•ä¿¡æ¯**ï¼ˆ`grep -n "æ–‡ä»¶: {f}" /root/video_server/video_server.py`ï¼‰
2. **æ£€æŸ¥è¯­æ³•**ï¼ˆ`python3 -m py_compile /root/video_server/video_server.py`ï¼‰
3. **æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€**ï¼ˆ`systemctl status video-server`ï¼‰
4. **å¦‚æœæœªå¯åŠ¨ï¼Œå¯åŠ¨æœåŠ¡å™¨**ï¼ˆ`systemctl start video-server`ï¼‰
5. **æµ‹è¯•API**ï¼ˆ`curl http://localhost:8081/api/list/åŸåˆ›è§†é¢‘`ï¼‰

---

**ç»§ç»­æ‰§è¡Œæ£€æŸ¥å‘½ä»¤ï¼Œå‘Šè¯‰æˆ‘ç»“æœï¼** ğŸ”

