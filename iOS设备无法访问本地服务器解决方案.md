# iOS 设备无法访问本地服务器解决方案

## 问题诊断

✅ **服务器状态**：正在运行（端口 8081）
✅ **Mac 本地访问**：可以访问 `http://192.168.10.103:8081`
❌ **iOS 设备访问**：无法访问

## 可能的原因和解决方案

### 原因 1：Mac 防火墙阻止外部连接

**检查防火墙状态**：
1. 打开"系统设置"（System Settings）
2. 点击"网络"（Network）
3. 点击"防火墙"（Firewall）
4. 查看防火墙是否开启

**解决方案**：
1. **临时关闭防火墙**（测试用）：
   - 在防火墙设置中，点击"关闭防火墙"
   - 测试 iOS 设备是否可以访问
   - 测试完成后重新开启

2. **允许 Python 通过防火墙**（推荐）：
   - 在防火墙设置中，点击"选项"（Options）
   - 找到 Python 或 Terminal
   - 设置为"允许传入连接"

### 原因 2：Mac 和 iOS 设备不在同一 WiFi

**检查**：
1. 确保 Mac 和 iOS 设备连接到**同一个 WiFi 网络**
2. 检查 Mac 的 IP 地址是否正确：
   ```bash
   ifconfig | grep "inet " | grep -v 127.0.0.1
   ```
3. 如果 IP 地址变化，需要更新 `lib/config.dart` 中的 IP

### 原因 3：服务器绑定地址问题

服务器代码已经绑定到 `0.0.0.0`（所有接口），应该没问题。

## 快速测试步骤

### 步骤 1：在 Mac 上测试

```bash
# 测试本地 IP 访问
curl http://192.168.10.103:8081/api/list/原创视频
```

如果成功，说明服务器正常。

### 步骤 2：检查防火墙

1. 系统设置 → 网络 → 防火墙
2. 如果防火墙开启，尝试关闭测试
3. 或者允许 Python/Terminal 通过防火墙

### 步骤 3：在 iOS 设备上测试

1. 确保 iOS 设备和 Mac 在同一 WiFi
2. 在 Safari 中访问：`http://192.168.10.103:8081/api/list/原创视频`
3. 如果仍然无法访问，检查：
   - WiFi 网络是否相同
   - Mac IP 地址是否正确
   - 防火墙是否阻止

## 替代方案：使用示例内容

如果网络问题无法解决，可以：
1. 暂时使用应用中的示例内容进行开发
2. 继续完成其他功能（用户协议、隐私政策等）
3. 等网络问题解决后再测试服务器连接

## 临时解决方案

如果急需测试，可以：
1. 关闭 Mac 防火墙（仅测试时）
2. 确保 Mac 和 iOS 设备在同一 WiFi
3. 重新启动服务器
4. 在 iOS 设备上测试


