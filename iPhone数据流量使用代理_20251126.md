# 📱 iPhone 数据流量使用代理指南（2025-11-26）

## ⚠️ 重要说明

**iOS 系统的 HTTP 代理设置只对 Wi-Fi 连接有效，对数据流量无效！**

如果你使用的是数据流量（4G/5G），需要其他方法。

---

## ✅ 解决方案

### 方案1：使用 Wi-Fi 连接（最简单）

1. **确保手机连接到 Wi-Fi**（不是数据流量）
2. **在 Wi-Fi 设置中配置代理**（之前的方法）
3. **测试访问 Google**

### 方案2：使用 VPN 应用（数据流量可用）

由于 iOS 限制，数据流量无法使用系统代理，需要使用 VPN 应用。

#### 推荐 VPN 应用

1. **Shadowrocket**（需要美区账号，支持自定义代理）
2. **Quantumult X**（需要美区账号，功能强大）
3. **Surge**（需要美区账号，专业工具）

这些应用可以：
- 在数据流量下使用
- 配置自定义代理服务器
- 指向你的香港服务器

#### 配置步骤（以 Shadowrocket 为例）

1. **下载应用**（需要美区 Apple ID）
2. **打开应用，添加服务器**：
   - 类型：HTTP
   - 服务器：`47.243.177.166`
   - 端口：`3128`
3. **开启代理**
4. **测试访问 Google**

### 方案3：使用电脑热点（推荐，无需额外应用）

如果你的 Mac 可以访问 Google（通过 VPN 或代理），可以：

1. **在 Mac 上配置代理或 VPN**
2. **开启 Wi-Fi 热点**
3. **手机连接 Mac 的热点**
4. **手机通过 Mac 的网络访问 Google**

#### Mac 开启热点步骤

1. **系统设置 → 共享**
2. **互联网共享**
3. **选择"通过 Wi-Fi 共享"**
4. **开启共享**

#### 如果 Mac 也需要代理

在 Mac 上配置代理：
1. **系统设置 → 网络 → Wi-Fi → 高级 → 代理**
2. **配置 HTTP 代理**：
   - 服务器：`47.243.177.166`
   - 端口：`3128`
3. **保存**

然后 Mac 就可以访问 Google，手机连接 Mac 热点后也能访问。

---

## 🔍 验证代理是否工作

### 检查服务器端

在远程桌面终端运行：
```bash
# 查看 Squid 日志
sudo tail -f /var/log/squid/access.log
```

当手机访问时，应该能看到访问记录。

### 检查手机端

1. **确保使用 Wi-Fi**（不是数据流量）
2. **确认代理已配置**：
   - 设置 → Wi-Fi → 点击网络 → HTTP 代理
   - 应该显示"手动"，服务器和端口已填写
3. **测试访问**：`https://www.google.com`

---

## 🚀 推荐操作流程

### 最简单方案

1. **确保手机连接到 Wi-Fi**（关闭数据流量）
2. **在 Wi-Fi 设置中配置代理**：
   - 服务器：`47.243.177.166`
   - 端口：`3128`
3. **测试访问 Google**
4. **如果成功，完成 Google 验证**

### 如果必须使用数据流量

1. **在 Mac 上配置代理**（指向服务器）
2. **Mac 开启 Wi-Fi 热点**
3. **手机连接 Mac 热点**（这样手机使用的是 Wi-Fi，可以配置代理）
4. **在手机 Wi-Fi 设置中配置代理**
5. **测试访问 Google**

---

## 📝 快速检查清单

- [ ] 手机是否连接到 Wi-Fi？（不是数据流量）
- [ ] Wi-Fi 代理是否已配置？
- [ ] 阿里云安全组是否开放 3128 端口？
- [ ] 服务器 Squid 服务是否运行？
- [ ] 能否在手机浏览器访问 Google？

---

## 🆘 如果仍然无法访问

### 排查步骤

1. **确认使用 Wi-Fi**：
   - 设置 → Wi-Fi
   - 确保已连接 Wi-Fi（不是数据流量）

2. **检查代理配置**：
   - 设置 → Wi-Fi → 点击网络 → HTTP 代理
   - 确认显示"手动"，服务器和端口正确

3. **检查服务器**：
   ```bash
   sudo systemctl status squid
   sudo ufw status | grep 3128
   ```

4. **检查阿里云安全组**：
   - 确认 3128 端口已开放

5. **尝试其他方法**：
   - 使用 Mac 热点
   - 或使用 VPN 应用

---

## 💡 最佳实践

**推荐方案**：
1. 手机连接 Wi-Fi（家里的 Wi-Fi 或 Mac 热点）
2. 在 Wi-Fi 设置中配置代理
3. 访问 Google 完成验证

**避免**：
- 不要使用数据流量（iOS 不支持）
- 不要使用公共 Wi-Fi（可能有安全风险）

---

**最后更新**：2025-11-26  
**重要提示**：iOS 代理只对 Wi-Fi 有效，数据流量需要使用 VPN 应用或 Mac 热点








