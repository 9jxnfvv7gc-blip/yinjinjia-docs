# 阿里云香港服务器完整教程

## 第一步：购买服务器

### 1. 访问阿里云
- 链接：https://www.aliyun.com/benefit/select/globalecs
- 这是阿里云的活动页面，有优惠价格

### 2. 选择配置
- **地域**：必须选择 **香港**
- **配置**：最低配置即可（1核1G，约99元/月）
- **操作系统**：选择 **Ubuntu 20.04** 或 **Ubuntu 22.04**
- **带宽**：1-5Mbps 即可

### 3. 购买
- 注册/登录账号
- 完成实名认证
- 选择购买时长（建议先买1个月试试）
- 支付

## 第二步：获取服务器信息

### 购买后，你会得到：
1. **服务器IP地址**（公网IP）
2. **用户名**（通常是 `root`）
3. **密码**（在控制台可以重置）

### 如何查看：
1. 登录阿里云控制台
2. 进入"云服务器ECS"
3. 找到你的服务器
4. 查看"公网IP"和"实例ID"

## 第三步：连接到服务器（最简单的方法）

### 方法 1：使用阿里云控制台（推荐新手）

1. **登录阿里云控制台**
   - 访问：https://ecs.console.aliyun.com

2. **找到你的服务器**
   - 点击"实例与镜像" > "实例"
   - 找到你的香港服务器

3. **远程连接**
   - 点击"远程连接"
   - 选择"Workbench远程连接"
   - 输入密码（首次需要设置）

4. **进入命令行**
   - 现在你就在服务器的命令行界面了

### 方法 2：使用SSH工具（可选）

如果你熟悉SSH，可以使用：
- **macOS自带终端**
- **Windows可以使用PuTTY**

## 第四步：安装代理软件（一键安装）

### 推荐：使用一键安装脚本

在服务器命令行中，复制粘贴以下命令：

#### 安装 Shadowsocks（简单易用）

```bash
# 下载安装脚本
wget --no-check-certificate -O shadowsocks.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.sh

# 添加执行权限
chmod +x shadowsocks.sh

# 运行安装脚本
./shadowsocks.sh
```

**安装过程中会提示：**
1. 设置密码（自己设置一个，记住它）
2. 设置端口（直接回车，使用默认8080）
3. 选择加密方式（选择 `aes-256-gcm`，输入7）

**安装完成后会显示：**
- 服务器IP
- 端口号
- 密码
- 加密方式

**重要：把这些信息保存下来！**

## 第五步：在本地配置客户端

### macOS 客户端

#### 1. 下载客户端
- 搜索 "ShadowsocksX-NG" 或 "ClashX"
- 下载并安装

#### 2. 配置服务器信息
- 打开客户端
- 添加服务器：
  - **服务器地址**：你的服务器IP
  - **端口**：安装时设置的端口（默认8080）
  - **密码**：安装时设置的密码
  - **加密方式**：aes-256-gcm

#### 3. 启动代理
- 点击"连接"或"启动"
- 确保代理已启动

#### 4. 查看代理端口
- ShadowsocksX-NG：通常是 `1080` 或 `1087`
- ClashX：通常是 `7890`

**记住这个端口号！**

## 第六步：配置 Gradle 使用代理

### 我已经帮你配置好了！

配置文件：`android/gradle.properties`

### 如果代理端口是 7890
- ✅ 已经配置好了，直接使用

### 如果代理端口不是 7890
告诉我端口号，我会更新配置。

## 第七步：测试构建

### 1. 确保代理已启动
- 客户端显示"已连接"

### 2. 运行构建命令
```bash
cd /Volumes/Expansion/FlutterProjects/桌面影音播放器_安装包_20251121_165905
export PUB_HOSTED_URL=https://pub.flutter-io.cn
export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn
export JAVA_HOME=/opt/homebrew/opt/openjdk@17/libexec/openjdk.jdk/Contents/Home
export PATH=$JAVA_HOME/bin:$PATH
flutter run -d DAR8NRZT8PT4C66P
```

## 常见问题

### Q1: 不会用命令行怎么办？
**A:** 使用阿里云控制台的"Workbench远程连接"，这是图形界面，更简单。

### Q2: 安装脚本失败怎么办？
**A:** 可以尝试其他安装方法，或者我可以提供更详细的步骤。

### Q3: 不知道代理端口怎么办？
**A:** 
- ShadowsocksX-NG：查看设置中的"本地端口"
- ClashX：查看设置中的"HTTP端口"
- 或者告诉我，我可以帮你查找

### Q4: 连接不上服务器怎么办？
**A:** 
1. 检查服务器是否运行中
2. 检查安全组是否开放了端口
3. 检查密码是否正确

## 安全组配置（重要！）

### 在阿里云控制台配置：

1. **进入安全组**
   - 控制台 > 云服务器ECS > 网络与安全 > 安全组

2. **添加入站规则**
   - 端口：8080（或你设置的端口）
   - 协议：TCP
   - 授权对象：0.0.0.0/0

3. **保存**

## 总结

### 购买后需要做的：
1. ✅ 连接到服务器（使用控制台）
2. ✅ 安装代理软件（一键脚本）
3. ✅ 保存服务器信息（IP、端口、密码）
4. ✅ 在本地配置客户端
5. ✅ 启动代理
6. ✅ 告诉我代理端口（如果不是7890）
7. ✅ 测试构建

### 如果遇到问题
- 告诉我具体在哪一步
- 我会提供更详细的帮助

## 参考链接

- 阿里云活动页面：https://www.aliyun.com/benefit/select/globalecs
- 阿里云控制台：https://ecs.console.aliyun.com

