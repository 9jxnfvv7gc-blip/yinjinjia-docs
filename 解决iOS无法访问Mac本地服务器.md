# 解决 iOS 无法访问 Mac 本地服务器

## 问题确认

✅ iOS 设备可以访问其他网站（网络正常）
❌ iOS 设备无法访问 `http://192.168.10.103:8081`
✅ Mac 本地可以访问服务器

## 可能的原因

### 原因 1：Mac 和 iOS 设备不在同一 WiFi 网络

**检查方法**：
1. **Mac 上查看 WiFi 名称**：
   - 点击 WiFi 图标，查看当前连接的网络名称
   
2. **iOS 设备上查看 WiFi 名称**：
   - 设置 → WiFi，查看当前连接的网络名称
   
3. **确认是否相同**：
   - 如果不同，需要连接到同一个 WiFi

### 原因 2：路由器 AP 隔离（客户端隔离）

某些路由器默认开启"AP 隔离"或"客户端隔离"，阻止设备间通信。

**解决方法**：
1. 登录路由器管理界面（通常是 `192.168.1.1` 或 `192.168.0.1`）
2. 找到"AP 隔离"或"客户端隔离"设置
3. 关闭该功能
4. 保存并重启路由器

### 原因 3：Mac 防火墙或网络设置

虽然防火墙已关闭，但可能还有其他网络限制。

## 解决方案

### 方案 1：确认同一 WiFi（最重要）

**步骤**：
1. 在 Mac 上查看 WiFi 名称
2. 在 iOS 设备上确认连接到**完全相同的** WiFi 网络
3. 如果不同，让 iOS 设备连接到 Mac 的 WiFi

### 方案 2：使用 Mac 的热点

如果无法解决路由器问题，可以：

1. **Mac 创建热点**：
   - 系统设置 → 通用 → 共享 → 互联网共享
   - 选择"WiFi"作为共享方式
   - 开启"互联网共享"

2. **iOS 设备连接到 Mac 热点**：
   - 在 iOS 设备上，设置 → WiFi
   - 找到 Mac 创建的热点并连接

3. **更新配置**：
   - Mac 热点的 IP 可能不同
   - 需要重新获取 Mac IP 并更新 `lib/config.dart`

### 方案 3：使用 USB 连接（开发测试）

对于开发测试，可以使用 USB 连接：

1. **连接 USB**：用 USB 线连接 iOS 设备到 Mac
2. **使用 localhost**：修改配置使用 `localhost:8081`
3. **通过 USB 转发**：Flutter 会自动处理 USB 连接

### 方案 4：暂时使用示例内容

如果网络问题无法快速解决，可以：
- 继续开发其他功能
- 应用已配置错误处理，会显示友好提示
- 等网络问题解决后再测试

## 快速测试

### 测试 1：确认 Mac IP

在 Mac 终端运行：
```bash
ifconfig | grep "inet " | grep -v 127.0.0.1
```

### 测试 2：在 Mac 上测试

```bash
curl http://192.168.10.103:8081/api/list/原创视频
```

如果成功，说明服务器正常。

### 测试 3：检查 WiFi 名称

- **Mac**：点击 WiFi 图标查看
- **iOS**：设置 → WiFi 查看

确保名称**完全相同**（包括大小写）。

## 推荐操作

1. **首先确认**：Mac 和 iOS 设备是否在同一 WiFi
2. **如果不同**：让 iOS 设备连接到 Mac 的 WiFi
3. **如果相同但仍无法访问**：检查路由器 AP 隔离设置
4. **如果无法解决**：使用 Mac 热点或暂时使用示例内容


