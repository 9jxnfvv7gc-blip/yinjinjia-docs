# 重启服务器安全说明

## ✅ 重启服务器不会丢失文件

### 不会丢失的内容：

1. **所有文件系统中的文件**
   - ✅ 项目代码（`/root/app/`）
   - ✅ 已安装的软件（Flutter、Android SDK等）
   - ✅ 配置文件
   - ✅ 上传的文件
   - ✅ 所有已保存的数据

2. **系统配置**
   - ✅ 环境变量配置（`~/.bashrc`）
   - ✅ SSH配置
   - ✅ 防火墙规则
   - ✅ 系统设置

---

## ⚠️ 会丢失的内容（临时数据）

### 会丢失的内容：

1. **正在运行的进程**
   - ❌ 正在运行的构建进程（如果正在构建APK）
   - ❌ 正在运行的服务器进程
   - ❌ 终端会话

2. **内存中的数据**
   - ❌ 未保存的临时数据
   - ❌ 内存缓存

---

## 📋 重启前检查清单

### 1. 检查是否有正在运行的构建

在服务器Workbench终端执行：

```bash
# 检查是否有Flutter构建进程
ps aux | grep flutter | grep -v grep

# 检查是否有Gradle构建进程
ps aux | grep gradle | grep -v grep
```

**如果有构建进程**：
- 建议等待构建完成后再重启
- 或者中断构建（按Ctrl+C），然后重启

---

### 2. 检查重要文件是否已保存

```bash
# 检查项目文件
ls -la /root/app/

# 检查Flutter和Android SDK
ls -la /opt/flutter/
ls -la /opt/android-sdk/
```

**这些文件都会保留**，重启后仍然存在。

---

### 3. 检查是否有未保存的工作

**通常不需要担心**：
- 代码文件已保存在磁盘上
- 配置文件已保存
- 只有内存中的进程会停止

---

## 🔄 重启后需要做的事情

### 1. 重新连接服务器

- 使用Workbench重新连接
- 或使用SSH重新连接

---

### 2. 检查服务状态

```bash
# 检查Flutter
flutter --version

# 检查Android SDK
echo $ANDROID_HOME

# 检查项目文件
ls -la /root/app/
```

---

### 3. 重新加载环境变量（如果需要）

```bash
# 加载环境变量
source ~/.bashrc

# 验证环境变量
echo $PATH
echo $ANDROID_HOME
```

---

### 4. 继续构建（如果需要）

```bash
cd /root/app
source ~/.bashrc
flutter build apk
```

---

## 💡 重要提示

### 1. 文件安全

**所有文件都存储在磁盘上**，重启不会丢失：
- ✅ 项目代码
- ✅ 已安装的软件
- ✅ 配置文件
- ✅ 所有数据

### 2. 进程状态

**只有正在运行的进程会停止**：
- 如果正在构建APK，构建会中断
- 但已构建的文件不会丢失（在 `build/` 目录中）

### 3. 环境配置

**环境配置会保留**：
- `~/.bashrc` 中的配置会保留
- 系统配置会保留
- 只需要重新加载环境变量

---

## 🎯 总结

### ✅ 可以安全重启的情况：

1. ✅ 没有正在运行的重要构建
2. ✅ 所有文件已保存
3. ✅ 准备重置密码

### ⚠️ 建议等待的情况：

1. ⚠️ 正在构建APK（建议等待完成）
2. ⚠️ 正在上传文件（建议等待完成）

---

## 📝 重启步骤

### 1. 在阿里云控制台重启服务器

1. 登录阿里云控制台
2. 找到ECS实例
3. 点击"重启"
4. 等待重启完成（通常1-2分钟）

### 2. 重启后重新连接

1. 使用Workbench重新连接
2. 使用新密码登录（如果重置了密码）

### 3. 验证环境

```bash
# 检查Flutter
flutter --version

# 检查项目
cd /root/app && ls -la
```

---

## 🔧 解决终端复制粘贴问题

### 问题：Workbench终端不能复制粘贴

**解决方法**：

1. **使用右键菜单**：
   - 右键点击终端
   - 选择"粘贴"

2. **使用快捷键**：
   - Mac: `Command+V` 粘贴
   - 或者 `Shift+Insert` 粘贴

3. **手动输入**：
   - 如果复制粘贴不工作，可以手动输入命令

4. **刷新页面**：
   - 刷新Workbench页面
   - 重新连接终端

---

## ✅ 结论

**重启服务器是安全的**：
- ✅ 不会丢失文件
- ✅ 不会丢失配置
- ✅ 只会停止正在运行的进程
- ✅ 重启后可以继续工作

**建议**：
- 如果没有正在运行的重要构建，可以安全重启
- 如果有正在构建的APK，建议等待完成后再重启

---

**可以安全重启！所有文件都会保留！** 🚀

