# å¯åŠ¨æœåŠ¡å™¨æ­¥éª¤

## âœ… æ£€æŸ¥ç»“æžœ

- âœ… ç›®å½•å·²åˆ›å»º
- âœ… æ–‡ä»¶å·²ä¸Šä¼ 
- âŒ æœåŠ¡å™¨æœªè¿è¡Œ

---

## ðŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### æ­¥éª¤1ï¼šä¿®æ”¹æœåŠ¡å™¨é…ç½®

åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /root/video_server

# ä¿®æ”¹VIDEO_ROOTä¸ºæœåŠ¡å™¨è·¯å¾„
sed -i 's|VIDEO_ROOT = "/Volumes/Expansion"|VIDEO_ROOT = "/root/videos"|g' video_server.py

# éªŒè¯ä¿®æ”¹
grep "VIDEO_ROOT" video_server.py
```

**åº”è¯¥æ˜¾ç¤º**ï¼š`VIDEO_ROOT = "/root/videos"`

---

### æ­¥éª¤2ï¼šå¯åŠ¨æœåŠ¡å™¨

#### æ–¹æ³•1ï¼šç›´æŽ¥è¿è¡Œï¼ˆæµ‹è¯•ç”¨ï¼‰

```bash
cd /root/video_server
python3 video_server.py
```

**åº”è¯¥çœ‹åˆ°**ï¼š
```
å¯åŠ¨è§†é¢‘æœåŠ¡å™¨...
ç«¯å£: 8081
è§†é¢‘æ ¹ç›®å½•: /root/videos
Serving at port 8081
```

**ä¿æŒè¿™ä¸ªç»ˆç«¯çª—å£æ‰“å¼€**

---

#### æ–¹æ³•2ï¼šä½¿ç”¨systemdæœåŠ¡ï¼ˆæŽ¨èï¼Œè‡ªåŠ¨å¯åŠ¨ï¼‰

åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
# åˆ›å»ºsystemdæœåŠ¡æ–‡ä»¶
cat > /etc/systemd/system/video-server.service << 'EOF'
[Unit]
Description=Video Server
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/video_server
ExecStart=/usr/bin/python3 /root/video_server/video_server.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# é‡æ–°åŠ è½½systemd
systemctl daemon-reload

# å¯ç”¨æœåŠ¡ï¼ˆå¼€æœºè‡ªå¯ï¼‰
systemctl enable video-server

# å¯åŠ¨æœåŠ¡
systemctl start video-server

# æŸ¥çœ‹çŠ¶æ€
systemctl status video-server
```

**å¦‚æžœçœ‹åˆ° "active (running)" è¯´æ˜ŽæœåŠ¡å·²å¯åŠ¨**

---

### æ­¥éª¤3ï¼šæµ‹è¯•æœåŠ¡å™¨

åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
# æµ‹è¯•APIï¼ˆåº”è¯¥è¿”å›žç©ºæ•°ç»„ï¼‰
curl http://localhost:8081/api/list/åŽŸåˆ›è§†é¢‘

# æµ‹è¯•æœåŠ¡å™¨çŠ¶æ€
curl http://localhost:8081
```

**åº”è¯¥è¿”å›ž**ï¼š
- åˆ—è¡¨APIï¼š`[]`ï¼ˆç©ºæ•°ç»„ï¼Œå› ä¸ºæ²¡æœ‰å†…å®¹ï¼‰
- çŠ¶æ€é¡µé¢ï¼šHTMLå†…å®¹

---

## ðŸ“‹ å®Œæ•´æ“ä½œå‘½ä»¤

### åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
# 1. ä¿®æ”¹é…ç½®
cd /root/video_server
sed -i 's|VIDEO_ROOT = "/Volumes/Expansion"|VIDEO_ROOT = "/root/videos"|g' video_server.py
grep "VIDEO_ROOT" video_server.py

# 2. å¯åŠ¨æœåŠ¡å™¨ï¼ˆé€‰æ‹©ä¸€ç§æ–¹æ³•ï¼‰

# æ–¹æ³•Aï¼šç›´æŽ¥è¿è¡Œ
python3 video_server.py

# æ–¹æ³•Bï¼šä½¿ç”¨systemdæœåŠ¡ï¼ˆæŽ¨èï¼‰
cat > /etc/systemd/system/video-server.service << 'EOF'
[Unit]
Description=Video Server
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/video_server
ExecStart=/usr/bin/python3 /root/video_server/video_server.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF
systemctl daemon-reload
systemctl enable video-server
systemctl start video-server
systemctl status video-server

# 3. æµ‹è¯•æœåŠ¡å™¨
curl http://localhost:8081/api/list/åŽŸåˆ›è§†é¢‘
```

---

## ðŸ’¡ æŽ¨èæ“ä½œ

### ä½¿ç”¨systemdæœåŠ¡ï¼ˆæŽ¨èï¼‰

**ä¼˜ç‚¹**ï¼š
- âœ… æœåŠ¡å™¨åœ¨åŽå°è¿è¡Œ
- âœ… æ–­å¼€è¿žæŽ¥åŽç»§ç»­è¿è¡Œ
- âœ… æœåŠ¡å™¨é‡å¯åŽè‡ªåŠ¨å¯åŠ¨
- âœ… ä¸éœ€è¦ä¿æŒç»ˆç«¯æ‰“å¼€

---

## ðŸŽ¯ çŽ°åœ¨å¯ä»¥æ‰§è¡Œ

åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œå¯åŠ¨æœåŠ¡å™¨ï¼

---

**æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤æ“ä½œï¼Œå¯åŠ¨æœåŠ¡å™¨ï¼** ðŸš€

