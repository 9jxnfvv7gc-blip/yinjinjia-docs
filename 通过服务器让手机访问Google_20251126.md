# 🌐 通过香港服务器让手机访问 Google（2025-11-26）

## 🎯 方案概述

你的远程桌面服务器在香港，可以访问 Google。我们可以让手机通过这个服务器访问 Google。

---

## ✅ 方案1：在服务器上设置代理（推荐）

### 原理
在服务器上运行代理服务，手机配置代理指向服务器，通过服务器访问 Google。

### 步骤1：在服务器上安装代理软件

在远程桌面的终端中运行：

```bash
# 安装 Squid 代理服务器
sudo apt update
sudo apt install -y squid

# 配置 Squid（允许所有访问）
sudo sed -i 's/http_access deny all/http_access allow all/' /etc/squid/squid.conf

# 启动 Squid
sudo systemctl enable squid
sudo systemctl start squid

# 检查状态
sudo systemctl status squid
```

### 步骤2：开放代理端口

```bash
# 开放 3128 端口（Squid 默认端口）
sudo ufw allow 3128/tcp
sudo ufw reload
```

### 步骤3：在阿里云安全组开放端口

1. 登录阿里云控制台
2. 进入 ECS 实例管理
3. 点击安全组
4. 添加入站规则：
   - 端口：3128
   - 协议：TCP
   - 源：0.0.0.0/0（或你的手机 IP）

### 步骤4：在手机上配置代理

#### iOS 设备

1. **设置 → Wi-Fi**
2. **点击你连接的 Wi-Fi 网络**（右侧的 ⓘ 图标）
3. **向下滚动，找到"HTTP 代理"**
4. **选择"手动"**
5. **填写**：
   - 服务器：`47.243.177.166`
   - 端口：`3128`
   - 认证：关闭
6. **保存**

#### Android 设备

1. **设置 → Wi-Fi**
2. **长按你连接的 Wi-Fi 网络**
3. **选择"修改网络"或"网络详情"**
4. **高级选项 → 代理**
5. **选择"手动"**
6. **填写**：
   - 代理主机名：`47.243.177.166`
   - 代理端口：`3128`
7. **保存**

### 步骤5：测试

1. **在手机浏览器中访问**：`https://www.google.com`
2. **如果能看到 Google 首页**，说明配置成功 ✅
3. **完成 Google 验证**

---

## ✅ 方案2：使用 SSH 隧道（简单但需要 Mac）

### 原理
在 Mac 上建立 SSH 隧道，Mac 开启热点，手机通过 Mac 访问 Google。

### 步骤1：在 Mac 上建立 SSH 隧道

在 Mac 终端运行：

```bash
# 建立 SSH 隧道（将服务器的 3128 端口转发到本地）
ssh -L 3128:localhost:3128 root@47.243.177.166 -N
```

**注意**：这个命令会保持运行，不要关闭终端窗口。

### 步骤2：在服务器上安装并启动 Squid

在远程桌面终端中：

```bash
sudo apt install -y squid
sudo sed -i 's/http_access deny all/http_access allow all/' /etc/squid/squid.conf
sudo systemctl start squid
```

### 步骤3：在 Mac 上开启热点

1. **系统设置 → 共享 → 互联网共享**
2. **选择"通过 Wi-Fi 共享"**
3. **开启共享**

### 步骤4：在手机上配置代理

1. **手机连接 Mac 的热点**
2. **配置代理**（同方案1的步骤4）
   - 服务器：`你的 Mac 的 IP 地址`（通常是 192.168.x.x）
   - 端口：`3128`

### 步骤5：测试

在手机浏览器访问 `https://www.google.com`

---

## 🚀 快速开始（推荐方案1）

### 在远程桌面中执行

1. **打开终端**（桌面右键 → Open Terminal Here）

2. **安装 Squid**：
   ```bash
   sudo apt update
   sudo apt install -y squid
   ```

3. **配置 Squid**：
   ```bash
   sudo sed -i 's/http_access deny all/http_access allow all/' /etc/squid/squid.conf
   ```

4. **启动服务**：
   ```bash
   sudo systemctl enable squid
   sudo systemctl start squid
   sudo systemctl status squid
   ```

5. **开放端口**：
   ```bash
   sudo ufw allow 3128/tcp
   sudo ufw reload
   ```

6. **在阿里云安全组开放 3128 端口**

7. **在手机上配置代理**（见上面的步骤4）

---

## 🔍 验证代理是否工作

### 在手机上测试

1. **配置代理后**，打开浏览器
2. **访问**：`https://www.google.com`
3. **如果能看到 Google 首页**，说明成功 ✅

### 如果无法访问

1. **检查 Squid 状态**：
   ```bash
   sudo systemctl status squid
   ```

2. **检查端口是否开放**：
   ```bash
   sudo ufw status | grep 3128
   ```

3. **查看 Squid 日志**：
   ```bash
   sudo tail -f /var/log/squid/access.log
   ```

---

## 📝 配置完成后

1. **在手机上配置代理**（指向服务器 47.243.177.166:3128）
2. **测试访问 Google**
3. **在远程桌面中重新打开 Google 注册页面**
4. **扫描二维码**（用已配置代理的手机）
5. **完成验证**

---

## ⚠️ 注意事项

### 安全提示

- Squid 代理配置为允许所有访问（仅用于测试）
- 生产环境建议配置访问控制
- 完成验证后可以关闭代理服务

### 性能提示

- 通过代理访问速度可能较慢
- 仅用于完成 Google 验证
- 验证完成后可以关闭代理

---

## 🆘 如果方案1不工作

### 备选：使用 SOCKS5 代理

如果 HTTP 代理不工作，可以尝试 SOCKS5：

1. **在服务器上安装 SSH**（已安装）
2. **在 Mac 上建立 SOCKS5 隧道**：
   ```bash
   ssh -D 1080 -N root@47.243.177.166
   ```
3. **在手机上配置 SOCKS5 代理**（需要支持 SOCKS5 的应用）

---

## 📌 快速参考

### 服务器端命令
```bash
sudo apt install -y squid
sudo sed -i 's/http_access deny all/http_access allow all/' /etc/squid/squid.conf
sudo systemctl start squid
sudo ufw allow 3128/tcp
```

### 手机配置
- 服务器：`47.243.177.166`
- 端口：`3128`
- 类型：HTTP 代理

---

**最后更新**：2025-11-26  
**推荐方案**：在服务器上设置 Squid 代理








