# å¯åŠ¨æœåŠ¡å™¨å®Œæ•´æ­¥éª¤

## âœ… å½“å‰çŠ¶æ€

- âœ… å·²åœ¨ `/root/video_server` ç›®å½•
- âœ… `video_server.py` æ–‡ä»¶å·²å­˜åœ¨
- â³ éœ€è¦ä¿®æ”¹é…ç½®å¹¶å¯åŠ¨æœåŠ¡å™¨

---

## ðŸš€ æ“ä½œæ­¥éª¤

### æ­¥éª¤1ï¼šä¿®æ”¹é…ç½®

åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼ˆä½ å·²ç»åœ¨ `/root/video_server` ç›®å½•ï¼‰ï¼š

```bash
# ä¿®æ”¹VIDEO_ROOTä¸ºæœåŠ¡å™¨è·¯å¾„
sed -i 's|VIDEO_ROOT = "/Volumes/Expansion"|VIDEO_ROOT = "/root/videos"|g' video_server.py

# éªŒè¯ä¿®æ”¹
grep "VIDEO_ROOT" video_server.py
```

**åº”è¯¥æ˜¾ç¤º**ï¼š`VIDEO_ROOT = "/root/videos"`

---

### æ­¥éª¤2ï¼šå¯åŠ¨æœåŠ¡å™¨

#### æ–¹æ³•1ï¼šç›´æŽ¥è¿è¡Œï¼ˆæµ‹è¯•ç”¨ï¼‰

```bash
python3 video_server.py
```

**åº”è¯¥çœ‹åˆ°**ï¼š
```
å¯åŠ¨è§†é¢‘æœåŠ¡å™¨...
ç«¯å£: 8081
è§†é¢‘æ ¹ç›®å½•: /root/videos
Serving at port 8081
```

**ä¿æŒè¿™ä¸ªç»ˆç«¯çª—å£æ‰“å¼€**

---

#### æ–¹æ³•2ï¼šä½¿ç”¨systemdæœåŠ¡ï¼ˆæŽ¨èï¼‰

åœ¨**æ–°çš„ç»ˆç«¯çª—å£**æ‰§è¡Œï¼ˆå› ä¸ºç›´æŽ¥è¿è¡Œä¼šå ç”¨ç»ˆç«¯ï¼‰ï¼š

```bash
# åˆ›å»ºsystemdæœåŠ¡
cat > /etc/systemd/system/video-server.service << 'EOF'
[Unit]
Description=Video Server
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/video_server
ExecStart=/usr/bin/python3 /root/video_server/video_server.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# å¯åŠ¨æœåŠ¡
systemctl daemon-reload
systemctl enable video-server
systemctl start video-server

# æŸ¥çœ‹çŠ¶æ€
systemctl status video-server
```

---

### æ­¥éª¤3ï¼šæµ‹è¯•æœåŠ¡å™¨

åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
# æµ‹è¯•API
curl http://localhost:8081/api/list/åŽŸåˆ›è§†é¢‘

# æµ‹è¯•æœåŠ¡å™¨çŠ¶æ€
curl http://localhost:8081
```

**åº”è¯¥è¿”å›ž**ï¼š
- åˆ—è¡¨APIï¼š`[]`ï¼ˆç©ºæ•°ç»„ï¼Œå› ä¸ºæ²¡æœ‰å†…å®¹ï¼‰
- çŠ¶æ€é¡µé¢ï¼šHTMLå†…å®¹

---

## ðŸ“‹ å®Œæ•´å‘½ä»¤ï¼ˆæŒ‰é¡ºåºæ‰§è¡Œï¼‰

### åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
# 1. ç¡®ä¿åœ¨æ­£ç¡®ç›®å½•
cd /root/video_server

# 2. ä¿®æ”¹é…ç½®
sed -i 's|VIDEO_ROOT = "/Volumes/Expansion"|VIDEO_ROOT = "/root/videos"|g' video_server.py

# 3. éªŒè¯é…ç½®
grep "VIDEO_ROOT" video_server.py

# 4. å¯åŠ¨æœåŠ¡å™¨ï¼ˆé€‰æ‹©ä¸€ç§æ–¹æ³•ï¼‰

# æ–¹æ³•Aï¼šç›´æŽ¥è¿è¡Œï¼ˆä¼šå ç”¨ç»ˆç«¯ï¼‰
python3 video_server.py

# æ–¹æ³•Bï¼šä½¿ç”¨systemdæœåŠ¡ï¼ˆæŽ¨èï¼Œåœ¨åŽå°è¿è¡Œï¼‰
# åœ¨æ–°çš„ç»ˆç«¯çª—å£æ‰§è¡Œï¼š
cat > /etc/systemd/system/video-server.service << 'EOF'
[Unit]
Description=Video Server
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/video_server
ExecStart=/usr/bin/python3 /root/video_server/video_server.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF
systemctl daemon-reload
systemctl enable video-server
systemctl start video-server
systemctl status video-server

# 5. æµ‹è¯•æœåŠ¡å™¨
curl http://localhost:8081/api/list/åŽŸåˆ›è§†é¢‘
```

---

## ðŸ’¡ æŽ¨èæ“ä½œ

### ä½¿ç”¨systemdæœåŠ¡ï¼ˆæŽ¨èï¼‰

**ä¼˜ç‚¹**ï¼š
- âœ… æœåŠ¡å™¨åœ¨åŽå°è¿è¡Œ
- âœ… ä¸éœ€è¦ä¿æŒç»ˆç«¯æ‰“å¼€
- âœ… æœåŠ¡å™¨é‡å¯åŽè‡ªåŠ¨å¯åŠ¨
- âœ… å¯ä»¥éšæ—¶æŸ¥çœ‹çŠ¶æ€

---

## ðŸŽ¯ çŽ°åœ¨å¯ä»¥æ‰§è¡Œ

åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
# ä¿®æ”¹é…ç½®
sed -i 's|VIDEO_ROOT = "/Volumes/Expansion"|VIDEO_ROOT = "/root/videos"|g' video_server.py
grep "VIDEO_ROOT" video_server.py
```

ç„¶åŽé€‰æ‹©å¯åŠ¨æ–¹æ³•ï¼ˆç›´æŽ¥è¿è¡Œæˆ–systemdæœåŠ¡ï¼‰ã€‚

---

**å…ˆä¿®æ”¹é…ç½®ï¼Œç„¶åŽå¯åŠ¨æœåŠ¡å™¨ï¼** ðŸš€

