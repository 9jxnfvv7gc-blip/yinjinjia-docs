# 服务器运行正常后的下一步

## ✅ 当前状态

- ✅ 服务器运行正常：`active (running)`
- ✅ 端口监听：`0.0.0.0:8081`（监听所有接口）
- ✅ API测试成功：返回空数组 `[]`（正常，因为还没有内容）
- ⏳ 需要配置外部访问和上传内容

---

## 🌐 步骤1：配置阿里云安全组（重要）

### 在阿里云控制台操作：

1. 登录阿里云控制台
2. 进入 **ECS实例** → 选择你的服务器（IP: 47.243.177.166）
3. 点击 **安全组** → **配置规则**
4. 检查 **入方向规则** 是否有 **8081端口**
5. 如果没有，点击 **添加安全组规则**：
   - **端口范围**：`8081/8081`
   - **授权对象**：`0.0.0.0/0`
   - **协议类型**：`TCP`
   - **描述**：`视频服务器`
   - 点击 **保存**

---

## 🧪 步骤2：测试外部访问

### 配置完安全组后，在你的Mac终端执行：

```bash
# 测试外部访问
curl http://47.243.177.166:8081/api/list/原创视频

# 测试歌曲列表API
curl http://47.243.177.166:8081/api/list/原创歌曲
```

**应该返回**：`[]`（空数组）

**如果返回错误**，检查：
1. 安全组是否配置了8081端口
2. 防火墙是否开放了8081端口

---

## 📤 步骤3：上传内容到服务器

### 方法1：使用Workbench文件管理器

1. 打开Workbench文件管理器
2. 导航到 `/root/videos/原创视频/` 或 `/root/videos/原创歌曲/`
3. 点击 **上传** 按钮
4. 选择本地文件上传

### 方法2：使用rsync从Mac上传（如果SSH可用）

在你的Mac终端执行：

```bash
# 上传视频
rsync -avz --progress "/Volumes/Expansion/原创视频/" root@47.243.177.166:/root/videos/原创视频/

# 上传歌曲
rsync -avz --progress "/Volumes/Expansion/原创歌曲/" root@47.243.177.166:/root/videos/原创歌曲/
```

**注意**：如果SSH密码登录失败，使用Workbench文件管理器上传。

---

## ✅ 步骤4：验证上传结果

### 在Workbench终端执行：

```bash
# 检查视频文件
ls -lh /root/videos/原创视频/

# 检查歌曲文件
ls -lh /root/videos/原创歌曲/

# 测试API（应该返回文件列表，不再是空数组）
curl http://localhost:8081/api/list/原创视频
curl http://localhost:8081/api/list/原创歌曲
```

**应该返回**：JSON格式的文件列表

---

## 🧪 步骤5：测试应用

### 在你的Mac上：

1. 打开Flutter应用（macOS或iOS）
2. 应用应该自动从服务器加载内容
3. 检查是否能显示服务器上的视频和歌曲

---

## 📋 完整操作流程

### 1. 配置安全组（阿里云控制台）
- 开放8081端口

### 2. 测试外部访问（Mac终端）
```bash
curl http://47.243.177.166:8081/api/list/原创视频
```

### 3. 上传内容（Workbench文件管理器或rsync）

### 4. 验证上传（Workbench终端）
```bash
ls -lh /root/videos/原创视频/
curl http://localhost:8081/api/list/原创视频
```

### 5. 测试应用（Mac/iOS设备）
- 打开Flutter应用
- 检查是否能从服务器加载内容

---

## 🎯 现在可以执行

1. **配置安全组**（在阿里云控制台，开放8081端口）
2. **测试外部访问**（在Mac上：`curl http://47.243.177.166:8081/api/list/原创视频`）
3. **上传内容**（使用Workbench文件管理器或rsync）
4. **测试应用**（打开Flutter应用，检查是否能从服务器加载内容）

---

**先配置安全组，然后测试外部访问！** 🚀

