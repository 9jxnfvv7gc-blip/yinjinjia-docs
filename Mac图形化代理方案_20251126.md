# 🎯 Mac 图形化代理方案（2025-11-26）

## 📋 你的情况

- ✅ 有香港服务器（47.243.177.166）
- ✅ 已配置 Squid 代理（端口 3128）
- ❌ 没有 V2Ray/Shadowsocks 配置
- ✅ Mac 需要通过图形化软件访问 Google
- ✅ iPhone 需要通过 Mac 中转访问 Google

---

## 🚀 推荐方案：Mac 使用图形化代理客户端

### 方案1：Mac 安装 ClashX Pro（推荐）

#### 步骤1：在 Mac 上安装 ClashX Pro

1. **下载 ClashX Pro**：
   - 访问：https://github.com/yichengchen/clashX/releases
   - 下载最新版本（.dmg 文件）
   - 安装到 Mac

#### 步骤2：配置 ClashX Pro 使用香港服务器

由于你没有 V2Ray/Shadowsocks 配置，可以：

**选项A：使用现有的 Squid 代理**

ClashX Pro 支持 HTTP 代理，可以配置使用你的 Squid 代理：

1. **打开 ClashX Pro**
2. **创建配置文件**：
   - 点击菜单栏的 ClashX Pro 图标
   - 选择"配置" → "打开配置文件夹"
   - 创建一个新的配置文件（如 `hongkong.yaml`）

3. **编辑配置文件**：
   ```yaml
   port: 7890
   socks-port: 7891
   allow-lan: true
   mode: rule
   log-level: info
   external-controller: 127.0.0.1:9090
   
   proxies:
     - name: "HongKong-Squid"
       type: http
       server: 47.243.177.166
       port: 3128
   
   proxy-groups:
     - name: "Proxy"
       type: select
       proxies:
         - "HongKong-Squid"
   
   rules:
     - MATCH,Proxy
   ```

4. **保存配置文件**
5. **在 ClashX Pro 中选择这个配置**
6. **点击"设置为系统代理"**

#### 步骤3：测试 Mac 访问 Google

1. **在 Mac 上打开浏览器**
2. **访问**：`https://www.google.com`
3. **确认可以访问**

#### 步骤4：开启局域网共享

1. **打开 ClashX Pro 偏好设置**：
   - 点击菜单栏的 ClashX Pro 图标
   - 选择"偏好设置"

2. **开启局域网连接**：
   - 勾选"允许局域网连接"
   - 记录 HTTP 端口（7890）
   - 记录 SOCKS5 端口（7891）

3. **查看 Mac 内网 IP**：
   ```bash
   ipconfig getifaddr en0
   ```
   - 记录这个 IP（例如：192.168.1.105）

#### 步骤5：配置 iPhone Wi-Fi 代理

1. **打开 iPhone 设置 → Wi-Fi**
2. **点击当前连接的 Wi-Fi 网络**（点击 ⓘ 图标）
3. **向下滚动到"HTTP 代理"**
4. **选择"手动"**
5. **填写**：
   - 服务器：Mac 的内网 IP（例如：192.168.1.105）
   - 端口：7890
   - 认证：关闭
6. **保存并返回**

#### 步骤6：测试 iPhone 访问 Google

1. **在 iPhone 上打开 Safari**
2. **访问**：`http://ipinfo.io`
3. **确认 IP 已切换**（应该显示香港 IP）
4. **访问**：`https://accounts.google.com/signup`
5. **看是否能打开**

---

### 方案2：Mac 使用其他图形化代理软件

如果你已经有其他图形化的 VPN/代理软件（如 Shadowsocks、V2RayU 等），可以：

1. **在 Mac 上配置连接香港服务器**
2. **开启局域网共享功能**
3. **iPhone 配置使用 Mac 的内网 IP + 端口**

---

### 方案3：Mac 直接使用 Squid 代理 + 开启局域网转发

如果 ClashX Pro 配置复杂，可以：

1. **在 Mac 上配置系统代理使用 Squid**：
   - 系统设置 → 网络 → 高级 → 代理
   - 配置 HTTP 代理：47.243.177.166:3128

2. **安装代理转发工具**（如 3Proxy 或 Squid）：
   ```bash
   # 安装 3Proxy
   brew install 3proxy
   ```

3. **配置 3Proxy 监听本地并转发到服务器**：
   - 监听本地端口（如 7890）
   - 转发到 47.243.177.166:3128

4. **iPhone 配置使用 Mac 内网 IP + 7890**

---

## 🔍 如果 ClashX Pro 配置复杂

### 简化方案：直接使用远程桌面

既然 Mac 需要通过图形化软件访问 Google，而你已经有了远程桌面：

1. **在远程桌面完成 Google 注册**（最简单）
2. **如果必须手机验证**：
   - 尝试使用备用邮箱验证
   - 或暂时跳过，使用国内应用市场

---

## 📝 操作步骤总结

### 如果选择 ClashX Pro 方案：

1. **在 Mac 上安装 ClashX Pro**
2. **创建配置文件，使用 Squid 代理**（47.243.177.166:3128）
3. **测试 Mac 访问 Google**
4. **开启局域网共享**（端口 7890）
5. **iPhone 配置 Wi-Fi 代理**（Mac 内网 IP + 7890）
6. **测试 iPhone 访问 Google**

### 如果配置复杂：

1. **在远程桌面完成 Google 注册**（最简单、最稳定）

---

## 🎯 建议

1. **先尝试 ClashX Pro 方案**（如果可行，这是最稳定的）
2. **如果配置复杂或遇到问题，在远程桌面完成注册**（最简单）

---

**最后更新**：2025-11-26  
**推荐**：先尝试 ClashX Pro，如果复杂，在远程桌面完成注册








