# 排查视频加载失败问题

## ❌ 问题现象

- ✅ 可以上传视频
- ❌ 视频加载失败，看不见内容

---

## 🔍 排查步骤

### 步骤1：检查服务器返回的URL格式

在Workbench终端执行：

```bash
# 测试API，查看返回的URL格式
curl http://localhost:8081/api/list/原创视频
```

**应该返回**：JSON格式，包含 `url` 字段，例如：
```json
[{
  "id": "...",
  "title": "视频名称.mp4",
  "url": "/原创视频/视频名称.mp4"
}]
```

---

### 步骤2：测试视频文件是否可以访问

在Workbench终端执行：

```bash
# 查看服务器上的视频文件
ls -lh /root/videos/原创视频/

# 测试视频文件是否可以访问（替换为实际文件名）
curl -I http://localhost:8081/原创视频/视频名称.mp4
```

**应该返回**：HTTP 200 状态码

---

### 步骤3：在Mac上测试外部访问

在你的Mac终端执行：

```bash
# 测试API
curl http://47.243.177.166:8081/api/list/原创视频

# 测试视频文件访问（替换为实际文件名）
curl -I http://47.243.177.166:8081/原创视频/视频名称.mp4
```

**应该返回**：HTTP 200 状态码

---

### 步骤4：检查应用中的URL

在应用运行时，查看终端调试输出：
- 应该看到：`视频播放器初始化，路径: http://...`
- 应该看到：`使用网络URL播放: http://...`

---

## 🔧 可能的问题和解决方案

### 问题1：URL格式不正确

**检查**：服务器返回的URL是否包含完整路径

**解决方案**：确保URL格式为：
- `http://47.243.177.166:8081/原创视频/视频名称.mp4`
- 而不是：`/原创视频/视频名称.mp4`

---

### 问题2：CORS问题

**检查**：服务器是否正确配置了CORS

**解决方案**：检查 `video_server.py` 中的CORS配置

---

### 问题3：视频文件路径问题

**检查**：服务器上的文件路径是否正确

**解决方案**：确保文件在 `/root/videos/原创视频/` 目录下

---

### 问题4：视频格式不支持

**检查**：视频文件格式是否被支持

**解决方案**：确保视频格式为 `.mp4`, `.mov`, `.avi` 等常见格式

---

## 🎯 现在可以执行

1. **检查服务器返回的URL格式**（`curl http://localhost:8081/api/list/原创视频`）
2. **测试视频文件是否可以访问**（`curl -I http://localhost:8081/原创视频/文件名.mp4`）
3. **查看应用调试输出**（终端中的日志）
4. **告诉我结果**，我会帮你进一步排查

---

**先执行排查步骤，告诉我结果！** 🔍

