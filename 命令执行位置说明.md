# ğŸ“ å‘½ä»¤æ‰§è¡Œä½ç½®è¯´æ˜

## ğŸ–¥ï¸ åœ¨æœ¬åœ° Mac ç»ˆç«¯æ‰§è¡Œ

### 1. æ‰“å¼€ç»ˆç«¯ï¼ˆTerminalï¼‰

- æŒ‰ `Command + ç©ºæ ¼` æ‰“å¼€ Spotlight
- è¾“å…¥ `Terminal` æˆ– `ç»ˆç«¯`
- æŒ‰å›è½¦æ‰“å¼€ç»ˆç«¯

### 2. åœ¨æœ¬åœ° Mac æ‰§è¡Œçš„å‘½ä»¤

#### æŸ¥çœ‹å½“å‰é…ç½®
```bash
cd "/Volumes/Expansion/FlutterProjects/æ¡Œé¢å½±éŸ³æ’­æ”¾å™¨_å®‰è£…åŒ…_20251121_165905"
cat lib/config.dart | grep -A 5 "apiBaseUrl"
```

#### ä¿®æ”¹åº”ç”¨é…ç½®ï¼ˆåˆ‡æ¢åˆ°åŒ—äº¬æœåŠ¡å™¨ï¼‰
```bash
cd "/Volumes/Expansion/FlutterProjects/æ¡Œé¢å½±éŸ³æ’­æ”¾å™¨_å®‰è£…åŒ…_20251121_165905"
# ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€æ–‡ä»¶
open -a TextEdit lib/config.dart
# æˆ–è€…ä½¿ç”¨ VS Code
code lib/config.dart
```

ç„¶åæ‰‹åŠ¨ä¿®æ”¹ç¬¬ 24 è¡Œï¼š
```dart
// ä»ï¼š
return 'http://192.168.10.103:8081';

// æ”¹ä¸ºï¼š
return beijingApiUrl;  // http://39.107.137.136:8081
```

#### è¿è¡Œ Flutter åº”ç”¨
```bash
cd "/Volumes/Expansion/FlutterProjects/æ¡Œé¢å½±éŸ³æ’­æ”¾å™¨_å®‰è£…åŒ…_20251121_165905"
flutter run -d Dianhua
```

#### æµ‹è¯•æœ¬åœ°æœåŠ¡å™¨ï¼ˆå¦‚æœä½¿ç”¨æœ¬åœ°æµ‹è¯•ï¼‰
```bash
curl http://localhost:8081/api/categories
```

---

## ğŸŒ åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨æ‰§è¡Œ

### 1. è¿æ¥åˆ°åŒ—äº¬æœåŠ¡å™¨

#### æ–¹å¼1ï¼šä½¿ç”¨é˜¿é‡Œäº‘ Workbenchï¼ˆæ¨èï¼Œå›¾å½¢ç•Œé¢ï¼‰

1. **æ‰“å¼€æµè§ˆå™¨**ï¼Œè®¿é—®ï¼šhttps://ecs.console.aliyun.com
2. **ç™»å½•é˜¿é‡Œäº‘è´¦å·**
3. **è¿›å…¥ ECS æ§åˆ¶å°**
4. **æ‰¾åˆ°ä½ çš„æœåŠ¡å™¨**ï¼š
   - å®ä¾‹ID: `8336ddd8dbe0433ea562a4b6e5f91da6`
   - IP: `39.107.137.136`
5. **ç‚¹å‡»"è¿œç¨‹è¿æ¥"** â†’ **"Workbenchè¿œç¨‹è¿æ¥"**
6. **ç‚¹å‡»"ç«‹å³ç™»å½•"**
7. **è¾“å…¥å¯†ç **ï¼ˆä½ çš„æœåŠ¡å™¨ root å¯†ç ï¼‰

#### æ–¹å¼2ï¼šä½¿ç”¨æœ¬åœ° Mac ç»ˆç«¯ SSH è¿æ¥

åœ¨æœ¬åœ° Mac ç»ˆç«¯æ‰§è¡Œï¼š
```bash
ssh root@39.107.137.136
# è¾“å…¥å¯†ç åæŒ‰å›è½¦
```

### 2. åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œçš„å‘½ä»¤

è¿æ¥æˆåŠŸåï¼Œåœ¨æœåŠ¡å™¨ç»ˆç«¯æ‰§è¡Œï¼š

#### æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€
```bash
# æ£€æŸ¥ video_server.py æ˜¯å¦åœ¨è¿è¡Œ
ps aux | grep video_server.py

# æ£€æŸ¥ 8081 ç«¯å£
netstat -tlnp | grep 8081
```

#### å¯åŠ¨è§†é¢‘æœåŠ¡å™¨
```bash
# è®¾ç½®è§†é¢‘ç›®å½•
export VIDEO_ROOT="/root/videos"

# è¿›å…¥è„šæœ¬ç›®å½•ï¼ˆæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰
cd /root/app

# å¯åŠ¨æœåŠ¡å™¨
nohup python3 video_server.py > /root/server.log 2>&1 &

# æ£€æŸ¥æ˜¯å¦å¯åŠ¨æˆåŠŸ
ps aux | grep video_server.py
```

#### æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
```bash
tail -f /root/server.log
```

#### å¼€æ”¾é˜²ç«å¢™ç«¯å£
```bash
# Ubuntu/Debian ç³»ç»Ÿ
sudo ufw allow 8081/tcp
sudo ufw reload

# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
sudo ufw status
```

#### æµ‹è¯•æœåŠ¡å™¨ï¼ˆåœ¨æœåŠ¡å™¨ä¸Šæµ‹è¯•ï¼‰
```bash
curl http://localhost:8081/api/categories
curl http://localhost:8081/api/list/åŸåˆ›è§†é¢‘
```

---

## ğŸ“ å®Œæ•´æ“ä½œæµç¨‹

### æ­¥éª¤1ï¼šåœ¨æœ¬åœ° Mac ç»ˆç«¯

```bash
# 1. æ‰“å¼€ç»ˆç«¯ï¼ˆTerminalï¼‰
# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd "/Volumes/Expansion/FlutterProjects/æ¡Œé¢å½±éŸ³æ’­æ”¾å™¨_å®‰è£…åŒ…_20251121_165905"

# 3. æŸ¥çœ‹å½“å‰é…ç½®
cat lib/config.dart | grep -A 5 "apiBaseUrl"
```

### æ­¥éª¤2ï¼šè¿æ¥åˆ°åŒ—äº¬æœåŠ¡å™¨

**é€‰æ‹©ä»¥ä¸‹æ–¹å¼ä¹‹ä¸€ï¼š**

#### æ–¹å¼Aï¼šä½¿ç”¨é˜¿é‡Œäº‘ Workbenchï¼ˆæ¨èï¼‰
1. æµè§ˆå™¨è®¿é—®ï¼šhttps://ecs.console.aliyun.com
2. æ‰¾åˆ°æœåŠ¡å™¨å®ä¾‹
3. ç‚¹å‡»"è¿œç¨‹è¿æ¥" â†’ "Workbenchè¿œç¨‹è¿æ¥"
4. è¾“å…¥å¯†ç ç™»å½•

#### æ–¹å¼Bï¼šä½¿ç”¨ SSHï¼ˆåœ¨æœ¬åœ° Mac ç»ˆç«¯ï¼‰
```bash
ssh root@39.107.137.136
# è¾“å…¥å¯†ç 
```

### æ­¥éª¤3ï¼šåœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼ˆè¿æ¥åï¼‰

```bash
# 1. æ£€æŸ¥è§†é¢‘ç›®å½•
ls -la /root/videos/åŸåˆ›è§†é¢‘

# 2. å¯åŠ¨æœåŠ¡å™¨
export VIDEO_ROOT="/root/videos"
cd /root/app  # æˆ– video_server.py æ‰€åœ¨ç›®å½•
nohup python3 video_server.py > /root/server.log 2>&1 &

# 3. æ£€æŸ¥æ˜¯å¦å¯åŠ¨æˆåŠŸ
ps aux | grep video_server.py

# 4. å¼€æ”¾é˜²ç«å¢™
sudo ufw allow 8081/tcp
sudo ufw reload
```

### æ­¥éª¤4ï¼šå›åˆ°æœ¬åœ° Mac ç»ˆç«¯

```bash
# 1. ä¿®æ”¹åº”ç”¨é…ç½®ï¼ˆä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ï¼‰
open -a TextEdit lib/config.dart
# æˆ–
code lib/config.dart

# 2. æ‰‹åŠ¨ä¿®æ”¹ï¼šå°† return 'http://192.168.10.103:8081' æ”¹ä¸º return beijingApiUrl;

# 3. æµ‹è¯•æœåŠ¡å™¨è¿æ¥
curl http://39.107.137.136:8081/api/categories

# 4. è¿è¡Œåº”ç”¨
flutter run -d Dianhua
```

---

## ğŸ¯ å¿«é€Ÿå‚è€ƒ

| æ“ä½œ | æ‰§è¡Œä½ç½® | å‘½ä»¤ |
|------|---------|------|
| æŸ¥çœ‹é…ç½® | æœ¬åœ° Mac ç»ˆç«¯ | `cat lib/config.dart \| grep apiBaseUrl` |
| ä¿®æ”¹é…ç½® | æœ¬åœ° Macï¼ˆæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰ | `open -a TextEdit lib/config.dart` |
| è¿æ¥æœåŠ¡å™¨ | æœ¬åœ° Mac ç»ˆç«¯ | `ssh root@39.107.137.136` |
| å¯åŠ¨æœåŠ¡å™¨ | æœåŠ¡å™¨ç»ˆç«¯ | `nohup python3 video_server.py &` |
| å¼€æ”¾é˜²ç«å¢™ | æœåŠ¡å™¨ç»ˆç«¯ | `sudo ufw allow 8081/tcp` |
| è¿è¡Œåº”ç”¨ | æœ¬åœ° Mac ç»ˆç«¯ | `flutter run -d Dianhua` |

---

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ‰“å¼€ç»ˆç«¯ï¼Ÿ
A: æŒ‰ `Command + ç©ºæ ¼`ï¼Œè¾“å…¥ `Terminal`ï¼ŒæŒ‰å›è½¦

### Q: å¦‚ä½•è¿æ¥åˆ°æœåŠ¡å™¨ï¼Ÿ
A: ä¸¤ç§æ–¹å¼ï¼š
1. é˜¿é‡Œäº‘æ§åˆ¶å° â†’ Workbenchï¼ˆå›¾å½¢ç•Œé¢ï¼Œæ¨èï¼‰
2. æœ¬åœ°ç»ˆç«¯æ‰§è¡Œ `ssh root@39.107.137.136`

### Q: å¦‚ä½•ä¿®æ”¹ä»£ç æ–‡ä»¶ï¼Ÿ
A: 
- ä½¿ç”¨ TextEdit: `open -a TextEdit lib/config.dart`
- ä½¿ç”¨ VS Code: `code lib/config.dart`
- æˆ–æ‰‹åŠ¨åœ¨ Finder ä¸­æ‰¾åˆ°æ–‡ä»¶ï¼ŒåŒå‡»æ‰“å¼€

### Q: å¦‚ä½•çŸ¥é“å‘½ä»¤åœ¨å“ªé‡Œæ‰§è¡Œï¼Ÿ
A: 
- å¦‚æœå‘½ä»¤ä¸­æœ‰ `cd "/Volumes/Expansion/..."` æˆ– `flutter run`ï¼Œåœ¨**æœ¬åœ° Mac ç»ˆç«¯**
- å¦‚æœå‘½ä»¤ä¸­æœ‰ `ssh root@...` æˆ– `nohup python3`ï¼Œåœ¨**æœåŠ¡å™¨ç»ˆç«¯**ï¼ˆè¿æ¥åï¼‰


