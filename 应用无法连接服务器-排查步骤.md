# ğŸ” åº”ç”¨æ— æ³•è¿æ¥æœåŠ¡å™¨ - æ’æŸ¥æ­¥éª¤

## ğŸ“‹ å½“å‰çŠ¶æ€

- **æœåŠ¡å™¨IP**ï¼š`47.243.177.166:8081`ï¼ˆé¦™æ¸¯æœåŠ¡å™¨ï¼‰
- **è§†é¢‘æ–‡ä»¶**ï¼šå·²æ‰¾åˆ°ï¼ˆ2ä¸ªè§†é¢‘åœ¨ `/root/videos/åŸåˆ›è§†é¢‘/`ï¼‰
- **é—®é¢˜**ï¼šåº”ç”¨æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨

## ğŸ”§ æ’æŸ¥æ­¥éª¤

### æ­¥éª¤1ï¼šæ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦è¿è¡Œ

åœ¨æœåŠ¡å™¨ç»ˆç«¯æ‰§è¡Œï¼š

```bash
# æ£€æŸ¥è¿›ç¨‹
ps aux | grep video_server.py

# å¦‚æœè¿›ç¨‹ä¸å­˜åœ¨ï¼Œå¯åŠ¨æœåŠ¡å™¨
cd /root/app
export VIDEO_ROOT="/root/videos"
nohup python3 video_server.py > /root/server.log 2>&1 &

# ç­‰å¾…å¯åŠ¨
sleep 3

# æ£€æŸ¥è¿›ç¨‹
ps aux | grep video_server.py

# æŸ¥çœ‹æ—¥å¿—
tail -30 /root/server.log
```

### æ­¥éª¤2ï¼šæµ‹è¯•æœåŠ¡å™¨æœ¬åœ°è¿æ¥

åœ¨æœåŠ¡å™¨ç»ˆç«¯æ‰§è¡Œï¼š

```bash
# æµ‹è¯•æœ¬åœ°è¿æ¥
curl http://localhost:8081/api/categories
curl http://localhost:8081/api/list/åŸåˆ›è§†é¢‘
```

### æ­¥éª¤3ï¼šæ£€æŸ¥é˜²ç«å¢™

åœ¨æœåŠ¡å™¨ç»ˆç«¯æ‰§è¡Œï¼š

```bash
# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
sudo ufw status

# å¦‚æœé˜²ç«å¢™é˜»æ­¢ï¼Œå¼€æ”¾ç«¯å£
sudo ufw allow 8081/tcp
sudo ufw reload

# æˆ–è€…æ£€æŸ¥ iptables
sudo iptables -L -n | grep 8081
```

### æ­¥éª¤4ï¼šæ£€æŸ¥é˜¿é‡Œäº‘å®‰å…¨ç»„

1. ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°
2. è¿›å…¥ ECS â†’ å®‰å…¨ç»„
3. æ‰¾åˆ°æœåŠ¡å™¨çš„å®‰å…¨ç»„
4. æ£€æŸ¥æ˜¯å¦æœ‰å…¥ç«™è§„åˆ™å…è®¸ 8081 ç«¯å£
5. å¦‚æœæ²¡æœ‰ï¼Œæ·»åŠ å…¥ç«™è§„åˆ™ï¼š
   - **ç«¯å£èŒƒå›´**ï¼š8081
   - **åè®®**ï¼šTCP
   - **æˆæƒå¯¹è±¡**ï¼š0.0.0.0/0

### æ­¥éª¤5ï¼šåœ¨æœ¬åœ° Mac æµ‹è¯•è¿æ¥

åœ¨æœ¬åœ° Mac ç»ˆç«¯æ‰§è¡Œï¼š

```bash
# æµ‹è¯•æœåŠ¡å™¨è¿æ¥
curl http://47.243.177.166:8081/api/categories

# å¦‚æœæ— æ³•è¿æ¥ï¼Œæ£€æŸ¥ç½‘ç»œ
ping 47.243.177.166
```

### æ­¥éª¤6ï¼šæ£€æŸ¥åº”ç”¨é…ç½®

ç¡®è®¤åº”ç”¨é…ç½®æŒ‡å‘æ­£ç¡®çš„æœåŠ¡å™¨ï¼š

æ–‡ä»¶ï¼š`lib/config.dart`

```dart
static String get apiBaseUrl {
  return productionApiUrl;  // http://47.243.177.166:8081
}
```

## ğŸš€ å¿«é€Ÿä¿®å¤

### å¦‚æœæœåŠ¡å™¨æœªè¿è¡Œ

åœ¨æœåŠ¡å™¨ç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /root/app
export VIDEO_ROOT="/root/videos"
nohup python3 video_server.py > /root/server.log 2>&1 &
sleep 3
ps aux | grep video_server.py
curl http://localhost:8081/api/list/åŸåˆ›è§†é¢‘
```

### å¦‚æœé˜²ç«å¢™é˜»æ­¢

åœ¨æœåŠ¡å™¨ç»ˆç«¯æ‰§è¡Œï¼š

```bash
sudo ufw allow 8081/tcp
sudo ufw reload
```

### å¦‚æœå®‰å…¨ç»„æœªé…ç½®

åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°é…ç½®å®‰å…¨ç»„è§„åˆ™ã€‚

## âœ… éªŒè¯

æœåŠ¡å™¨å¯åŠ¨åï¼Œåœ¨æœ¬åœ° Mac æµ‹è¯•ï¼š

```bash
curl http://47.243.177.166:8081/api/categories
curl http://47.243.177.166:8081/api/list/åŸåˆ›è§†é¢‘
```

å¦‚æœè¿”å› JSON æ•°æ®ï¼Œè¯´æ˜æœåŠ¡å™¨æ­£å¸¸ï¼Œåº”ç”¨åº”è¯¥å¯ä»¥è¿æ¥äº†ã€‚

## ğŸ“± è¿è¡Œåº”ç”¨

æœåŠ¡å™¨æ­£å¸¸åï¼Œåœ¨æœ¬åœ° Mac ç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd "/Volumes/Expansion/FlutterProjects/æ¡Œé¢å½±éŸ³æ’­æ”¾å™¨_å®‰è£…åŒ…_20251121_165905"
flutter run -d Dianhua
```


