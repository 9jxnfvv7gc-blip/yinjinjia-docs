# 配置正确后的测试步骤

## ✅ 配置确认

- ✅ `VIDEO_ROOT = "/root/videos"` 配置正确
- ⏳ 需要检查服务状态和测试API

---

## 🔍 步骤1：检查服务状态

在Workbench终端执行：

```bash
# 检查服务状态
systemctl status video-server

# 检查8081端口是否在监听
netstat -tlnp | grep 8081
```

**应该看到**：
- 服务状态：`active (running)`
- 端口监听：`0.0.0.0:8081` 或 `:::8081`

---

## 🧪 步骤2：测试服务器API

在Workbench终端执行：

```bash
# 测试视频列表API
curl http://localhost:8081/api/list/原创视频

# 测试歌曲列表API
curl http://localhost:8081/api/list/原创歌曲

# 测试服务器状态页面
curl http://localhost:8081
```

**应该返回**：
- 列表API：`[]`（空数组，因为没有内容）
- 状态页面：HTML内容

---

## 🌐 步骤3：检查外部访问（配置安全组）

### 在阿里云控制台配置安全组：

1. 登录阿里云控制台
2. 进入 **ECS实例** → 选择你的服务器（IP: 47.243.177.166）
3. 点击 **安全组** → **配置规则**
4. 检查 **入方向规则** 是否有 **8081端口**
5. 如果没有，点击 **添加安全组规则**：
   - **端口范围**：`8081/8081`
   - **授权对象**：`0.0.0.0/0`
   - **协议类型**：`TCP`
   - **描述**：`视频服务器`
   - 点击 **保存**

---

### 在Mac上测试外部访问：

配置完安全组后，在你的Mac终端执行：

```bash
# 测试外部访问
curl http://47.243.177.166:8081/api/list/原创视频
```

**应该返回**：`[]`（空数组）

---

## 📤 步骤4：上传内容到服务器

### 方法1：使用Workbench文件管理器

1. 打开Workbench文件管理器
2. 导航到 `/root/videos/原创视频/` 或 `/root/videos/原创歌曲/`
3. 点击 **上传** 按钮
4. 选择本地文件上传

### 方法2：使用scp从Mac上传

在你的Mac终端执行：

```bash
# 上传视频（如果SSH可用）
rsync -avz --progress "/Volumes/Expansion/原创视频/" root@47.243.177.166:/root/videos/原创视频/

# 上传歌曲
rsync -avz --progress "/Volumes/Expansion/原创歌曲/" root@47.243.177.166:/root/videos/原创歌曲/
```

---

## 📋 完整操作流程

### 在Workbench终端执行：

```bash
# 1. 检查服务状态
systemctl status video-server
netstat -tlnp | grep 8081

# 2. 测试API
curl http://localhost:8081/api/list/原创视频
curl http://localhost:8081/api/list/原创歌曲

# 3. 查看服务日志
journalctl -u video-server -n 10
```

### 在Mac终端执行（配置完安全组后）：

```bash
# 测试外部访问
curl http://47.243.177.166:8081/api/list/原创视频
```

---

## 🎯 现在可以执行

1. **检查服务状态**：`systemctl status video-server`
2. **测试API**：`curl http://localhost:8081/api/list/原创视频`
3. **配置安全组**（在阿里云控制台）
4. **测试外部访问**（在Mac上）

---

**先执行检查服务状态和测试API的命令，告诉我结果！** 🚀

