# ğŸ–¥ï¸ æœåŠ¡å™¨ç¼–è¯‘APKæ­¥éª¤

## ğŸ“‹ æ­¥éª¤æ¦‚è§ˆ

1. ä¸Šä¼ ä¿®æ”¹åçš„AndroidManifest.xmlåˆ°æœåŠ¡å™¨
2. åœ¨æœåŠ¡å™¨ä¸Šç¼–è¯‘APK
3. ä¸‹è½½APKåˆ°æœ¬åœ°
4. å®‰è£…åˆ°æ‰‹æœº

## ğŸš€ è¯¦ç»†æ­¥éª¤

### æ­¥éª¤1ï¼šä¸Šä¼ AndroidManifest.xmlåˆ°æœåŠ¡å™¨

**æ–¹æ³•1ï¼šä½¿ç”¨scpä¸Šä¼ **
```bash
# åœ¨æœ¬åœ°Macç»ˆç«¯è¿è¡Œ
scp android/app/src/main/AndroidManifest.xml root@47.243.177.166:/root/video_server/android/app/src/main/
```

**æ–¹æ³•2ï¼šä½¿ç”¨SFTPå·¥å…·**
- ä½¿ç”¨FileZillaæˆ–å…¶ä»–SFTPå·¥å…·
- è¿æ¥åˆ°æœåŠ¡å™¨
- ä¸Šä¼ æ–‡ä»¶åˆ°å¯¹åº”ç›®å½•

### æ­¥éª¤2ï¼šSSHè¿æ¥åˆ°æœåŠ¡å™¨

```bash
ssh root@47.243.177.166
```

### æ­¥éª¤3ï¼šè¿›å…¥é¡¹ç›®ç›®å½•

```bash
# æ‰¾åˆ°Flutteré¡¹ç›®ç›®å½•ï¼ˆæ ¹æ®ä½ çš„å®é™…æƒ…å†µè°ƒæ•´ï¼‰
cd /root/video_server
# æˆ–è€…
cd /path/to/your/flutter/project
```

### æ­¥éª¤4ï¼šç¡®è®¤æ–‡ä»¶å·²æ›´æ–°

```bash
# æ£€æŸ¥AndroidManifest.xmlæ˜¯å¦åŒ…å«ç½‘ç»œæƒé™
cat android/app/src/main/AndroidManifest.xml | grep INTERNET
```

åº”è¯¥çœ‹åˆ°ï¼š
```xml
<uses-permission android:name="android.permission.INTERNET"/>
```

### æ­¥éª¤5ï¼šç¼–è¯‘APK

```bash
# è·å–ä¾èµ–
flutter pub get

# ç¼–è¯‘Debugç‰ˆæœ¬ï¼ˆæ¨èï¼Œç¼–è¯‘å¿«ï¼‰
flutter build apk --debug

# æˆ–ç¼–è¯‘Releaseç‰ˆæœ¬ï¼ˆä¼˜åŒ–åï¼Œä½“ç§¯å°ï¼‰
flutter build apk --release
```

### æ­¥éª¤6ï¼šæŸ¥çœ‹ç¼–è¯‘ç»“æœ

```bash
# Debugç‰ˆæœ¬
ls -lh build/app/outputs/flutter-apk/app-debug.apk

# Releaseç‰ˆæœ¬
ls -lh build/app/outputs/flutter-apk/app-release.apk
```

### æ­¥éª¤7ï¼šä¸‹è½½APKåˆ°æœ¬åœ°

**åœ¨æœ¬åœ°Macç»ˆç«¯è¿è¡Œï¼š**

```bash
# ä¸‹è½½Debugç‰ˆæœ¬
scp root@47.243.177.166:/root/video_server/build/app/outputs/flutter-apk/app-debug.apk ~/Desktop/app-debug-new.apk

# æˆ–ä¸‹è½½Releaseç‰ˆæœ¬
scp root@47.243.177.166:/root/video_server/build/app/outputs/flutter-apk/app-release.apk ~/Desktop/app-release-new.apk
```

### æ­¥éª¤8ï¼šå®‰è£…åˆ°æ‰‹æœº

```bash
# æ£€æŸ¥è®¾å¤‡è¿æ¥
adb devices

# å®‰è£…Debugç‰ˆæœ¬
adb install -r ~/Desktop/app-debug-new.apk

# æˆ–å®‰è£…Releaseç‰ˆæœ¬
adb install -r ~/Desktop/app-release-new.apk
```

## ğŸ“ å®Œæ•´å‘½ä»¤åºåˆ—

### åœ¨æœ¬åœ°Macï¼ˆä¸Šä¼ æ–‡ä»¶ï¼‰ï¼š
```bash
cd /Volumes/Expansion/FlutterProjects/æ¡Œé¢å½±éŸ³æ’­æ”¾å™¨_å®‰è£…åŒ…_20251121_165905
scp android/app/src/main/AndroidManifest.xml root@47.243.177.166:/root/video_server/android/app/src/main/AndroidManifest.xml
```

### åœ¨æœåŠ¡å™¨ï¼ˆç¼–è¯‘ï¼‰ï¼š
```bash
cd /root/video_server  # æˆ–ä½ çš„é¡¹ç›®è·¯å¾„
flutter pub get
flutter build apk --debug
ls -lh build/app/outputs/flutter-apk/app-debug.apk
```

### åœ¨æœ¬åœ°Macï¼ˆä¸‹è½½å¹¶å®‰è£…ï¼‰ï¼š
```bash
scp root@47.243.177.166:/root/video_server/build/app/outputs/flutter-apk/app-debug.apk ~/Desktop/app-debug-new.apk
adb install -r ~/Desktop/app-debug-new.apk
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç¡®ä¿æœåŠ¡å™¨æœ‰Flutterç¯å¢ƒ**ï¼š
   ```bash
   flutter doctor
   ```

2. **ç¡®ä¿é¡¹ç›®è·¯å¾„æ­£ç¡®**ï¼š
   - æ ¹æ®ä½ çš„å®é™…æƒ…å†µè°ƒæ•´è·¯å¾„
   - å¦‚æœé¡¹ç›®ä¸åœ¨`/root/video_server`ï¼Œæ‰¾åˆ°æ­£ç¡®çš„è·¯å¾„

3. **å¦‚æœç¼–è¯‘å¤±è´¥**ï¼š
   - æ£€æŸ¥Flutterç‰ˆæœ¬ï¼š`flutter --version`
   - æ£€æŸ¥Android SDKï¼š`flutter doctor -v`
   - æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

## ğŸ¯ å¿«é€Ÿæ£€æŸ¥æ¸…å•

- [ ] AndroidManifest.xmlå·²ä¸Šä¼ åˆ°æœåŠ¡å™¨
- [ ] æœåŠ¡å™¨ä¸Šæ–‡ä»¶åŒ…å«ç½‘ç»œæƒé™
- [ ] Flutterç¯å¢ƒæ­£å¸¸ï¼ˆ`flutter doctor`ï¼‰
- [ ] ç¼–è¯‘æˆåŠŸï¼ˆ`flutter build apk --debug`ï¼‰
- [ ] APKå·²ä¸‹è½½åˆ°æœ¬åœ°
- [ ] å·²å®‰è£…åˆ°æ‰‹æœº
- [ ] åº”ç”¨èƒ½æ˜¾ç¤ºè§†é¢‘åˆ—è¡¨

---

**è¯·æŒ‰ç…§æ­¥éª¤æ“ä½œï¼Œå¦‚æœé‡åˆ°é—®é¢˜å‘Šè¯‰æˆ‘ï¼**


