# 📱 Android应用测试指南

## 🔍 第一步：检查Android开发环境

### 检查Flutter Android工具链

```bash
flutter doctor -v
```

**应该看到**：
- ✅ Android toolchain - develop for Android devices
- ✅ Android SDK
- ✅ Android NDK（如果需要）

---

### 检查Android设备

```bash
flutter devices
```

**应该看到**：
- Android设备（如果已连接）
- Android模拟器（如果已启动）

---

## 🚀 第二步：启动Android应用

### 方法1：使用Android模拟器

#### 启动Android模拟器：

**通过Android Studio**：
1. 打开Android Studio
2. Tools → Device Manager
3. 选择一个设备
4. 点击启动按钮

**通过命令行**：
```bash
# 列出可用模拟器
emulator -list-avds

# 启动模拟器（替换为你的模拟器名称）
emulator -avd <模拟器名称>
```

#### 运行应用：

```bash
cd /Volumes/Expansion/FlutterProjects/桌面影音播放器_安装包_20251121_165905
flutter run -d android
```

---

### 方法2：使用真实Android设备

#### 连接设备：

1. **启用USB调试**：
   - 设置 → 关于手机
   - 连续点击"版本号"7次
   - 返回设置 → 开发者选项
   - 启用"USB调试"

2. **连接设备**：
   - 用USB线连接手机和电脑
   - 在手机上确认"允许USB调试"

3. **检查连接**：
   ```bash
   adb devices
   ```
   应该看到你的设备

#### 运行应用：

```bash
cd /Volumes/Expansion/FlutterProjects/桌面影音播放器_安装包_20251121_165905
flutter run -d android
```

---

## 🧪 第三步：测试功能

### 1. 界面显示测试 ✅

**检查项**：
- [ ] 应用正常启动
- [ ] 标题栏显示"我的原创内容"
- [ ] 能看到统计卡片（"原创视频"和"原创歌曲"）
- [ ] 能看到上传按钮（绿色的"上传新内容"）
- [ ] 界面布局正常（适配手机屏幕）

---

### 2. 统计卡片测试 ✅

**测试"原创视频"卡片**：
- [ ] 点击卡片能展开/折叠
- [ ] 展开后显示所有视频
- [ ] 标题变为"全部视频 (数量)"
- [ ] 图标变为打开的文件夹（📂）
- [ ] 显示"收起"按钮

**测试"原创歌曲"卡片**：
- [ ] 点击卡片能展开/折叠
- [ ] 展开后显示所有歌曲
- [ ] 标题变为"全部歌曲 (数量)"
- [ ] 图标变为打开的文件夹（📂）
- [ ] 显示"收起"按钮

---

### 3. 上传功能测试 ✅

**测试上传视频**：
1. 点击绿色的"上传新内容"按钮
2. 选择"上传视频"
3. 文件选择器应该打开
4. 选择一个视频文件
5. 等待上传完成
6. 应该显示"上传成功！"提示
7. 列表应该自动刷新

**测试上传歌曲**：
1. 点击绿色的"上传新内容"按钮
2. 选择"上传音乐"
3. 文件选择器应该打开
4. 选择一个MP3文件
5. 等待上传完成
6. 应该显示"上传成功！"提示
7. 列表应该自动刷新

---

### 4. 删除功能测试 ✅

**测试删除视频**：
1. 找到要删除的视频
2. **长按**视频卡片（按住不放1-2秒）
3. 应该弹出底部菜单
4. 菜单中应该显示：
   - 📤 分享链接
   - 🔗 复制链接
   - 🗑️ 删除（红色）
5. 点击"删除"
6. 应该弹出确认对话框
7. 点击"删除"确认
8. 应该显示"删除成功！"提示
9. 列表应该自动刷新

**测试删除歌曲**：
- 同样的步骤，长按歌曲卡片

---

### 5. 播放功能测试 ✅

**测试播放视频**：
1. 点击视频卡片（不是长按）
2. 应该打开视频播放页面
3. 视频应该能正常播放
4. 播放控制应该正常

**测试播放歌曲**：
1. 点击歌曲卡片（不是长按）
2. 应该打开音乐播放页面
3. 音乐应该能正常播放
4. 播放控制应该正常

---

### 6. 分享功能测试 ✅

**测试分享链接**：
1. 长按视频或歌曲卡片
2. 选择"分享链接"
3. 应该弹出Android分享菜单
4. 可以选择分享到其他应用

**测试复制链接**：
1. 长按视频或歌曲卡片
2. 选择"复制链接"
3. 应该显示"链接已复制到剪贴板"提示
4. 可以在其他应用中粘贴链接

---

### 7. 文件夹功能测试 ✅

**测试展开/折叠**：
1. 点击"原创视频"卡片
2. 应该展开显示所有视频
3. 再次点击应该折叠回最新5个
4. 点击"原创歌曲"卡片同样功能

**测试"查看全部"按钮**：
1. 如果视频/歌曲超过5个
2. 应该显示"查看全部"按钮
3. 点击按钮应该展开显示全部

---

## ⚠️ 常见问题

### 问题1：没有Android设备

**解决方法**：
1. 安装Android Studio
2. 创建Android模拟器
3. 或连接真实Android设备

---

### 问题2：应用无法启动

**解决方法**：
```bash
# 清理并重新运行
flutter clean
flutter pub get
flutter run -d android
```

---

### 问题3：文件选择器显示"没有文件"

**原因**：Android设备可能没有媒体文件

**解决方法**：
1. 在设备上准备测试文件
2. 从文件管理器选择文件
3. 或从相册选择

---

### 问题4：长按没有反应

**解决方法**：
1. 确保是**长按**（按住不放1-2秒）
2. 不是点击，是长按
3. 等待1-2秒，菜单应该出现

---

### 问题5：上传失败

**检查项**：
1. Python服务器是否在运行？
2. 服务器地址是否正确？
3. 网络连接是否正常？
4. Android权限是否授予？

---

## 📋 测试报告模板

### 测试日期：___________

### 设备信息：
- 设备型号：___________
- Android版本：___________

### 测试结果：

#### 界面显示
- [ ] 通过
- [ ] 失败（说明：___________）

#### 统计卡片
- [ ] 通过
- [ ] 失败（说明：___________）

#### 上传功能
- [ ] 通过
- [ ] 失败（说明：___________）

#### 删除功能
- [ ] 通过
- [ ] 失败（说明：___________）

#### 播放功能
- [ ] 通过
- [ ] 失败（说明：___________）

#### 分享功能
- [ ] 通过
- [ ] 失败（说明：___________）

#### 文件夹功能
- [ ] 通过
- [ ] 失败（说明：___________）

### 发现的问题：
1. ___________
2. ___________

---

## 🎯 快速开始

### 1. 检查环境
```bash
flutter doctor -v
flutter devices
```

### 2. 启动设备
- Android模拟器：通过Android Studio启动
- 真实设备：连接USB并启用USB调试

### 3. 运行应用
```bash
cd /Volumes/Expansion/FlutterProjects/桌面影音播放器_安装包_20251121_165905
flutter run -d android
```

### 4. 等待编译完成

### 5. 测试功能

---

## ❓ 如果遇到问题

告诉我：
1. ✅ Android环境是否配置好？
2. ✅ 是否有Android设备或模拟器？
3. ✅ 应用是否成功启动？
4. ✅ 哪个功能测试失败？
5. ✅ 有什么错误信息？

我会帮你解决！

