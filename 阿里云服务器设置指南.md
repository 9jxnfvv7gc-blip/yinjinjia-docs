# é˜¿é‡Œäº‘æœåŠ¡å™¨è®¾ç½®æŒ‡å—

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

### 1. ç¡®è®¤æœåŠ¡å™¨ä¿¡æ¯
- âœ… å·²è´­ä¹°é˜¿é‡Œäº‘ECSæœåŠ¡å™¨
- éœ€è¦ç¡®è®¤ï¼š
  - æœåŠ¡å™¨IPåœ°å€
  - æ“ä½œç³»ç»Ÿï¼ˆå»ºè®®ï¼šUbuntu 22.04 æˆ– CentOS 7+ï¼‰
  - ç™»å½•å¯†ç æˆ–å¯†é’¥

### 2. è¿æ¥æœåŠ¡å™¨

#### æ–¹æ³•1ï¼šä½¿ç”¨SSHå‘½ä»¤è¡Œï¼ˆMac/Linuxï¼‰
```bash
ssh root@ä½ çš„æœåŠ¡å™¨IP
# æˆ–ä½¿ç”¨å¯†é’¥
ssh -i /path/to/key.pem root@ä½ çš„æœåŠ¡å™¨IP
```

#### æ–¹æ³•2ï¼šä½¿ç”¨é˜¿é‡Œäº‘æ§åˆ¶å°
1. ç™»å½•ï¼šhttps://ecs.console.aliyun.com
2. æ‰¾åˆ°ä½ çš„ECSå®ä¾‹
3. ç‚¹å‡»"è¿œç¨‹è¿æ¥"
4. é€‰æ‹©"Workbenchè¿œç¨‹è¿æ¥"æˆ–"VNCè¿œç¨‹è¿æ¥"

---

## ğŸ”§ ç¬¬ä¸€æ­¥ï¼šåŸºç¡€ç¯å¢ƒé…ç½®

### 1. æ›´æ–°ç³»ç»Ÿ
```bash
# Ubuntu/Debian
sudo apt update && sudo apt upgrade -y

# CentOS
sudo yum update -y
```

### 2. å®‰è£…å¿…è¦å·¥å…·
```bash
# Ubuntu/Debian
sudo apt install -y curl wget git vim

# CentOS
sudo yum install -y curl wget git vim
```

---

## ğŸ ç¬¬äºŒæ­¥ï¼šå®‰è£…Pythonç¯å¢ƒï¼ˆç”¨äºåç«¯æœåŠ¡ï¼‰

### æ–¹æ¡ˆAï¼šä½¿ç”¨Python 3ï¼ˆæ¨èï¼‰
```bash
# Ubuntu/Debian
sudo apt install -y python3 python3-pip python3-venv

# CentOS
sudo yum install -y python3 python3-pip
```

### éªŒè¯å®‰è£…
```bash
python3 --version
pip3 --version
```

---

## ğŸ“¦ ç¬¬ä¸‰æ­¥ï¼šå®‰è£…Node.jsï¼ˆå¯é€‰ï¼Œå¦‚æœä½¿ç”¨Node.jsåç«¯ï¼‰

```bash
# ä½¿ç”¨NVMå®‰è£…Node.jsï¼ˆæ¨èï¼‰
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# é‡æ–°åŠ è½½shellé…ç½®
source ~/.bashrc

# å®‰è£…Node.js LTSç‰ˆæœ¬
nvm install --lts
nvm use --lts

# éªŒè¯
node --version
npm --version
```

---

## ğŸ—„ï¸ ç¬¬å››æ­¥ï¼šå®‰è£…æ•°æ®åº“

### é€‰é¡¹1ï¼šMySQL/MariaDB
```bash
# Ubuntu/Debian
sudo apt install -y mariadb-server mariadb-client

# CentOS
sudo yum install -y mariadb-server mariadb

# å¯åŠ¨æœåŠ¡
sudo systemctl start mariadb
sudo systemctl enable mariadb

# å®‰å…¨é…ç½®
sudo mysql_secure_installation
```

### é€‰é¡¹2ï¼šPostgreSQL
```bash
# Ubuntu/Debian
sudo apt install -y postgresql postgresql-contrib

# CentOS
sudo yum install -y postgresql-server postgresql-contrib

# åˆå§‹åŒ–æ•°æ®åº“ï¼ˆCentOSï¼‰
sudo postgresql-setup initdb

# å¯åŠ¨æœåŠ¡
sudo systemctl start postgresql
sudo systemctl enable postgresql
```

### é€‰é¡¹3ï¼šMongoDBï¼ˆé€‚åˆNoSQLï¼‰
```bash
# Ubuntu 22.04
wget -qO - https://www.mongodb.org/static/pgp/server-7.0.asc | sudo apt-key add -
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/7.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list
sudo apt update
sudo apt install -y mongodb-org

# å¯åŠ¨æœåŠ¡
sudo systemctl start mongod
sudo systemctl enable mongod
```

---

## â˜ï¸ ç¬¬äº”æ­¥ï¼šé…ç½®é˜¿é‡Œäº‘OSSå¯¹è±¡å­˜å‚¨

### 1. å¼€é€šOSSæœåŠ¡
1. ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°ï¼šhttps://oss.console.aliyun.com
2. å¼€é€šOSSæœåŠ¡ï¼ˆå¦‚æœæœªå¼€é€šï¼‰
3. åˆ›å»ºBucketï¼ˆå­˜å‚¨ç©ºé—´ï¼‰

### 2. åˆ›å»ºBucket
- **Bucketåç§°**ï¼šä¾‹å¦‚ `your-video-bucket`
- **åœ°åŸŸ**ï¼šé€‰æ‹©ç¦»ç”¨æˆ·æœ€è¿‘çš„åŒºåŸŸï¼ˆå¦‚ï¼šåä¸œ1-æ­å·ï¼‰
- **å­˜å‚¨ç±»å‹**ï¼šæ ‡å‡†å­˜å‚¨
- **è¯»å†™æƒé™**ï¼šç§æœ‰ï¼ˆæ¨èï¼‰æˆ–å…¬å…±è¯»

### 3. è·å–AccessKey
1. è¿›å…¥ï¼šhttps://ram.console.aliyun.com/manage/ak
2. åˆ›å»ºAccessKey
3. **é‡è¦**ï¼šä¿å­˜AccessKey IDå’ŒAccessKey Secret

### 4. é…ç½®CDNï¼ˆå¯é€‰ï¼Œæ¨èï¼‰
1. è¿›å…¥CDNæ§åˆ¶å°ï¼šhttps://cdn.console.aliyun.com
2. æ·»åŠ åŸŸå
3. ç»‘å®šOSS Bucket
4. è·å–CDNåŸŸåï¼ˆç”¨äºåŠ é€Ÿè®¿é—®ï¼‰

---

## ğŸ”’ ç¬¬å…­æ­¥ï¼šé…ç½®é˜²ç«å¢™å’Œå®‰å…¨ç»„

### 1. é˜¿é‡Œäº‘å®‰å…¨ç»„é…ç½®
1. è¿›å…¥ECSæ§åˆ¶å°
2. é€‰æ‹©ä½ çš„å®ä¾‹ â†’ å®‰å…¨ç»„ â†’ é…ç½®è§„åˆ™
3. æ·»åŠ è§„åˆ™ï¼š
   - **ç«¯å£**ï¼š80ï¼ˆHTTPï¼‰
   - **ç«¯å£**ï¼š443ï¼ˆHTTPSï¼‰
   - **ç«¯å£**ï¼š8080ï¼ˆåç«¯APIï¼Œæ ¹æ®å®é™…æƒ…å†µï¼‰
   - **æˆæƒå¯¹è±¡**ï¼š0.0.0.0/0ï¼ˆå…è®¸æ‰€æœ‰IPï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®é™åˆ¶ï¼‰

### 2. ç³»ç»Ÿé˜²ç«å¢™ï¼ˆUbuntuï¼‰
```bash
# å…è®¸HTTPå’ŒHTTPS
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw allow 8080/tcp  # æ ¹æ®å®é™…ç«¯å£è°ƒæ•´

# å¯ç”¨é˜²ç«å¢™
sudo ufw enable

# æŸ¥çœ‹çŠ¶æ€
sudo ufw status
```

---

## ğŸŒ ç¬¬ä¸ƒæ­¥ï¼šå®‰è£…Nginxï¼ˆWebæœåŠ¡å™¨å’Œåå‘ä»£ç†ï¼‰

```bash
# Ubuntu/Debian
sudo apt install -y nginx

# CentOS
sudo yum install -y nginx

# å¯åŠ¨æœåŠ¡
sudo systemctl start nginx
sudo systemctl enable nginx

# æµ‹è¯•
curl http://localhost
```

### é…ç½®Nginxï¼ˆåç»­ä¼šè¯¦ç»†é…ç½®ï¼‰
```bash
sudo vim /etc/nginx/sites-available/default
```

---

## ğŸ” ç¬¬å…«æ­¥ï¼šé…ç½®SSLè¯ä¹¦ï¼ˆHTTPSï¼‰

### ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦
```bash
# å®‰è£…Certbot
sudo apt install -y certbot python3-certbot-nginx  # Ubuntu/Debian
sudo yum install -y certbot python3-certbot-nginx  # CentOS

# ç”³è¯·è¯ä¹¦ï¼ˆéœ€è¦å…ˆé…ç½®åŸŸåï¼‰
sudo certbot --nginx -d your-domain.com
```

---

## ğŸ“ ç¬¬ä¹æ­¥ï¼šåˆ›å»ºåº”ç”¨ç›®å½•

```bash
# åˆ›å»ºåº”ç”¨ç›®å½•
sudo mkdir -p /var/www/video-app
sudo chown $USER:$USER /var/www/video-app

# è¿›å…¥ç›®å½•
cd /var/www/video-app

# åˆ›å»ºç›®å½•ç»“æ„
mkdir -p backend uploads logs
```

---

## âœ… éªŒè¯æ¸…å•

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œæ£€æŸ¥ï¼š
- [ ] Python 3å·²å®‰è£…
- [ ] æ•°æ®åº“å·²å®‰è£…å¹¶è¿è¡Œ
- [ ] Nginxå·²å®‰è£…å¹¶è¿è¡Œ
- [ ] OSS Bucketå·²åˆ›å»º
- [ ] AccessKeyå·²è·å–
- [ ] å®‰å…¨ç»„å·²é…ç½®
- [ ] é˜²ç«å¢™å·²é…ç½®

---

## ğŸš€ ä¸‹ä¸€æ­¥

1. **éƒ¨ç½²åç«¯æœåŠ¡**ï¼ˆè§"åç«¯æœåŠ¡éƒ¨ç½²æŒ‡å—.md"ï¼‰
2. **é…ç½®Nginxåå‘ä»£ç†**
3. **é…ç½®åŸŸåDNSè§£æ**
4. **æµ‹è¯•APIæ¥å£**

---

## ğŸ“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æŸ¥çœ‹æœåŠ¡å™¨IPï¼Ÿ
A: åœ¨é˜¿é‡Œäº‘ECSæ§åˆ¶å°ï¼ŒæŸ¥çœ‹å®ä¾‹è¯¦æƒ…é¡µé¢çš„"å…¬ç½‘IP"ã€‚

### Q: å¿˜è®°rootå¯†ç ï¼Ÿ
A: åœ¨ECSæ§åˆ¶å° â†’ å®ä¾‹ â†’ é‡ç½®å®ä¾‹å¯†ç ã€‚

### Q: å¦‚ä½•ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨ï¼Ÿ
A: ä½¿ç”¨`scp`å‘½ä»¤ï¼š
```bash
scp /local/file root@æœåŠ¡å™¨IP:/remote/path
```

### Q: å¦‚ä½•æŸ¥çœ‹æœåŠ¡å™¨èµ„æºä½¿ç”¨æƒ…å†µï¼Ÿ
A: ä½¿ç”¨å‘½ä»¤ï¼š
```bash
# æŸ¥çœ‹ç£ç›˜
df -h

# æŸ¥çœ‹å†…å­˜
free -h

# æŸ¥çœ‹CPU
top
```

---

## ğŸ“š å‚è€ƒèµ„æº

- é˜¿é‡Œäº‘ECSæ–‡æ¡£ï¼šhttps://help.aliyun.com/product/25365.html
- é˜¿é‡Œäº‘OSSæ–‡æ¡£ï¼šhttps://help.aliyun.com/product/31815.html
- Nginxæ–‡æ¡£ï¼šhttps://nginx.org/en/docs/

