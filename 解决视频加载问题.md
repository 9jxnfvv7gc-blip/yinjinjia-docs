# 解决视频加载问题

## ✅ 已修复：ATS问题

已添加 `NSAppTransportSecurity` 配置，允许HTTP连接。

---

## ❌ 需要解决：404错误

URL返回404，说明服务器找不到文件。

**URL格式**：`http://47.243.177.166:8081/video/原创视频/1.mp4`

---

## 🔍 排查404问题

### 步骤1：检查服务器上的文件

在Workbench终端执行：

```bash
# 查看服务器上的视频文件
ls -lh /root/videos/原创视频/

# 查看文件列表
ls /root/videos/原创视频/
```

**确认文件名**：应该是 `1.mp4` 和 `2.mp4`

---

### 步骤2：测试服务器API返回

在Workbench终端执行：

```bash
# 测试API，查看返回的URL格式
curl http://localhost:8081/api/list/原创视频
```

**检查返回的URL格式**：
- 应该是：`/video/原创视频/1.mp4`
- 或者：`/video/原创视频/1.mp4`（带完整路径）

---

### 步骤3：测试视频文件访问

在Workbench终端执行：

```bash
# 测试视频文件访问（注意URL编码）
curl -I "http://localhost:8081/video/原创视频/1.mp4"

# 或者测试编码后的URL
curl -I "http://localhost:8081/video/%E5%8E%9F%E5%88%9B%E8%A7%86%E9%A2%91/1.mp4"
```

**如果返回404**：
- 检查文件是否存在
- 检查URL路径是否正确
- 检查服务器路由配置

---

### 步骤4：检查服务器路由

服务器应该处理 `/video/原创视频/文件名.mp4` 这样的路径。

**检查**：服务器代码中的路径处理逻辑

---

## 🔧 可能的问题

### 问题1：URL编码问题

**现象**：URL包含中文字符，可能无法正确访问

**解决方案**：确保URL正确编码

---

### 问题2：文件路径不对

**检查**：服务器上的文件路径是否正确

**解决方案**：确保文件在 `/root/videos/原创视频/` 目录下

---

### 问题3：服务器路由配置问题

**检查**：服务器是否正确处理 `/video/` 路径

**解决方案**：检查服务器代码中的路径处理逻辑

---

## 🎯 现在可以执行

1. **重新运行应用**（ATS问题已修复）
2. **检查服务器上的文件**（`ls -lh /root/videos/原创视频/`）
3. **测试API返回**（`curl http://localhost:8081/api/list/原创视频`）
4. **测试视频文件访问**（`curl -I "http://localhost:8081/video/原创视频/1.mp4"`）

---

**先执行排查步骤，告诉我结果！** 🔍

