# é…ç½®æœåŠ¡å™¨è‡ªåŠ¨å¯åŠ¨

## ðŸš€ åœ¨Workbenchç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# 1. åœæ­¢å½“å‰è¿è¡Œçš„æœåŠ¡å™¨
pkill -f video_server.py
systemctl stop video-server 2>/dev/null || true

# 2. åˆ›å»ºsystemdæœåŠ¡æ–‡ä»¶
cat > /etc/systemd/system/video-server.service << 'EOF'
[Unit]
Description=Video Server
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/video_server
ExecStart=/usr/bin/python3 /root/video_server/video_server.py
Restart=always
RestartSec=10
StandardOutput=append:/var/log/video-server.log
StandardError=append:/var/log/video-server-error.log

[Install]
WantedBy=multi-user.target
EOF

# 3. é‡æ–°åŠ è½½systemdé…ç½®
systemctl daemon-reload

# 4. å¯ç”¨æœåŠ¡ï¼ˆå¼€æœºè‡ªå¯ï¼‰
systemctl enable video-server

# 5. å¯åŠ¨æœåŠ¡
systemctl start video-server

# 6. æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status video-server

# 7. æµ‹è¯•APIï¼ˆç¡®è®¤æœåŠ¡æ­£å¸¸è¿è¡Œï¼‰
sleep 2
curl "http://localhost:8081/api/list/$(python3 -c "from urllib.parse import quote; print(quote('åŽŸåˆ›è§†é¢‘'))")" | python3 -m json.tool | head -20

# 8. æŸ¥çœ‹æ—¥å¿—
tail -20 /var/log/video-server.log
```

---

## ðŸ“‹ å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
systemctl status video-server
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
journalctl -u video-server -n 50 --no-pager

# æŸ¥çœ‹è¾“å‡ºæ—¥å¿—
tail -f /var/log/video-server.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f /var/log/video-server-error.log
```

### é‡å¯æœåŠ¡
```bash
systemctl restart video-server
```

### åœæ­¢æœåŠ¡
```bash
systemctl stop video-server
```

### ç¦ç”¨è‡ªåŠ¨å¯åŠ¨
```bash
systemctl disable video-server
```

---

## âœ… æ‰§è¡ŒåŽ

åº”è¯¥çœ‹åˆ°ï¼š
- æœåŠ¡çŠ¶æ€ä¸º`active (running)`
- APIè¿”å›žæ­£ç¡®çš„JSON
- æœåŠ¡å™¨ä¼šåœ¨ç³»ç»Ÿé‡å¯åŽè‡ªåŠ¨å¯åŠ¨

---

**å…ˆæ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼ŒæŠŠç»“æžœå‘ç»™æˆ‘ï¼** ðŸš€

