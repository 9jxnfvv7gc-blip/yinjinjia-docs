# 🔥 配置8082端口防火墙

## ❌ 当前问题

服务器上Flask服务已启动，但Mac无法连接（连接超时）。

## 🔍 原因

**防火墙未开放8082端口**，导致外部无法访问。

## 🔧 解决方案

### 在阿里云控制台配置防火墙

1. **登录阿里云控制台**
   - 访问：https://ecs.console.aliyun.com/

2. **找到北京服务器**
   - 进入 **云服务器ECS** → **实例**
   - 找到IP为 `39.107.137.136` 的服务器

3. **进入防火墙设置**
   - 点击服务器名称进入详情
   - 点击 **防火墙** 或 **安全组** 标签

4. **添加防火墙规则**
   - 点击 **添加规则** 或 **创建规则**
   - 填写以下信息：
     - **应用类型**：自定义
     - **协议**：TCP
     - **端口范围**：8082
     - **来源IP**：`0.0.0.0/0`（允许所有IP访问）
     - **备注**：链接服务器
   - 点击 **保存** 或 **确定**

5. **验证规则**
   - 应该能看到新添加的规则：
     ```
     TCP  8082  0.0.0.0/0  链接服务器
     ```

---

## ✅ 配置完成后测试

在Mac上执行：

```bash
curl -v --connect-timeout 5 http://39.107.137.136:8082/api/categories
```

**如果成功**，应该看到：
```json
[{"id":"video","name":"原创视频"}]
```

**如果仍然超时**：
- 等待1-2分钟让防火墙规则生效
- 检查服务器上服务是否还在运行
- 确认server.py监听的是 `0.0.0.0:8082`（不是 `127.0.0.1:8082`）

---

## 📱 安装新APK测试

防火墙配置完成后，安装新APK：

```bash
cd "/Volumes/Expansion/FlutterProjects/桌面影音播放器_安装包_20251121_165905"
adb install -r backups/apk_20251201/app-domestic-release-8082.apk
```

然后打开应用测试连接。

