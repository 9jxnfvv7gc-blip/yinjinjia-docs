# 🔧 安装卡住解决方案

## ⚠️ 当前情况

- 安装已超过 3-4 分钟
- 终端显示 "Installing and launching..." 但无响应
- 这通常表示安装过程卡住了

## 🚨 立即操作

### 步骤1：停止当前安装

在终端按 **`Ctrl+C`** 停止当前进程

### 步骤2：检查设备状态

在 iOS 设备上检查：
1. **设备是否已解锁**
2. **设备上是否显示安装提示**
3. **设备存储空间是否充足**（至少 100MB）
4. **设备是否信任此电脑**

### 步骤3：检查设备连接

在终端运行：
```bash
flutter devices
```

应该看到您的设备（Dianhua）在列表中。

## 🔄 解决方案

### 方案1：直接重新运行（推荐）

```bash
cd "/Volumes/Expansion/FlutterProjects/桌面影音播放器_安装包_20251121_165905"
flutter run -d Dianhua
```

### 方案2：清理后重新运行

如果方案1不行，尝试清理：

```bash
cd "/Volumes/Expansion/FlutterProjects/桌面影音播放器_安装包_20251121_165905"

# 停止当前进程（如果还在运行）
# 按 Ctrl+C

# 清理构建缓存
flutter clean

# 重新获取依赖
flutter pub get

# 重新运行
flutter run -d Dianhua
```

### 方案3：检查并修复设备连接

```bash
# 1. 检查设备
flutter devices

# 2. 如果设备不在列表中：
#    - 检查 USB 连接
#    - 在设备上确认"信任此电脑"
#    - 重新连接设备

# 3. 如果设备在列表中，尝试：
flutter run -d Dianhua --verbose
```

### 方案4：重启 Xcode 服务

如果以上都不行：

```bash
# 1. 停止所有 Flutter 进程
killall -9 dart
killall -9 flutter

# 2. 重启 Xcode（如果打开）
# 关闭 Xcode，然后重新打开

# 3. 重新运行
flutter run -d Dianhua
```

## 🔍 常见原因

1. **设备未解锁**：iOS 设备必须解锁才能安装
2. **设备未信任**：首次连接需要信任此电脑
3. **存储空间不足**：设备需要至少 100MB 可用空间
4. **USB 连接问题**：USB 线或端口可能有问题
5. **Xcode 服务卡住**：Xcode 的后台服务可能卡住

## 📱 设备端检查清单

- [ ] 设备已解锁
- [ ] 设备已信任此电脑（设置 → 通用 → VPN与设备管理）
- [ ] 设备存储空间充足（至少 100MB）
- [ ] USB 连接正常
- [ ] 开发者模式已启用（iOS 16+）

## 💡 预防措施

1. **确保设备解锁**：安装前解锁设备
2. **保持连接稳定**：使用原装 USB 线
3. **清理设备空间**：确保有足够存储空间
4. **重启设备**：如果经常卡住，可以重启设备

## 🆘 如果仍然失败

如果尝试所有方法后仍然失败，请提供：

1. **终端完整输出**（包括错误信息）
2. **`flutter devices` 的输出**
3. **设备型号和 iOS 版本**
4. **Xcode 版本**（运行 `xcodebuild -version`）

我可以根据具体信息提供更精确的解决方案。

## ✅ 成功标志

安装成功后，终端会显示：

```
Installing and launching...
Syncing files to device Dianhua... 96ms
Flutter run key commands.
r Hot reload. 🔥🔥🔥
R Hot restart.
h List all available interactive commands.
d Detach (terminate "flutter run" but leave application running).
c Clear the screen
q Quit (terminate the application on the device).

A Dart VM Service on Dianhua is available at: http://127.0.0.1:XXXXX/...
```

然后应用会在设备上启动。


