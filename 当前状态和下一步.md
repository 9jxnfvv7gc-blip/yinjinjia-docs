# ğŸ“‹ å½“å‰çŠ¶æ€å’Œä¸‹ä¸€æ­¥

## âœ… å·²å®Œæˆ

1. **åº”ç”¨é…ç½®å·²æ›´æ–°**
   - ä¸´æ—¶åˆ‡æ¢åˆ°æœ¬åœ°æœåŠ¡å™¨ï¼š`http://192.168.10.103:8081`
   - ç”¨äºå¿«é€Ÿæµ‹è¯•è¿æ¥

2. **æœ¬åœ°æœåŠ¡å™¨å·²å¯åŠ¨**
   - æœåŠ¡å™¨è¿è¡Œåœ¨ï¼š`http://192.168.10.103:8081`
   - API æµ‹è¯•ï¼šâœ… æ­£å¸¸å“åº”

3. **åº”ç”¨æ­£åœ¨è¿è¡Œ**
   - æ­£åœ¨å¯åŠ¨åˆ° iPhone è®¾å¤‡

## âš ï¸ å½“å‰é—®é¢˜

**æœ¬åœ°è§†é¢‘ç›®å½•ä¸ºç©º**
- è·¯å¾„ï¼š`/Volumes/Expansion/åŸåˆ›è§†é¢‘`
- çŠ¶æ€ï¼šç›®å½•å­˜åœ¨ä½†ä¸ºç©º

**è§†é¢‘æ–‡ä»¶åœ¨åŒ—äº¬æœåŠ¡å™¨ä¸Š**
- æœåŠ¡å™¨ï¼š`39.107.137.136`
- éœ€è¦å¯åŠ¨åŒ—äº¬æœåŠ¡å™¨çš„ `video_server.py`

## ğŸ¯ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šå¯åŠ¨åŒ—äº¬æœåŠ¡å™¨ï¼ˆæ¨èï¼‰

ä½ çš„è§†é¢‘åœ¨åŒ—äº¬æœåŠ¡å™¨ä¸Šï¼Œéœ€è¦å¯åŠ¨æœåŠ¡å™¨ï¼š

#### æ­¥éª¤1ï¼šè¿æ¥åˆ°åŒ—äº¬æœåŠ¡å™¨

```bash
ssh root@39.107.137.136
```

#### æ­¥éª¤2ï¼šå¯åŠ¨è§†é¢‘æœåŠ¡å™¨

```bash
# è®¾ç½®è§†é¢‘ç›®å½•
export VIDEO_ROOT="/root/videos"

# è¿›å…¥è„šæœ¬ç›®å½•
cd /root/app  # æˆ– video_server.py æ‰€åœ¨ç›®å½•

# å¯åŠ¨æœåŠ¡å™¨
nohup python3 video_server.py > /root/server.log 2>&1 &

# æ£€æŸ¥çŠ¶æ€
ps aux | grep video_server.py
tail -f /root/server.log
```

#### æ­¥éª¤3ï¼šå¼€æ”¾é˜²ç«å¢™

```bash
# Ubuntu/Debian
sudo ufw allow 8081/tcp
sudo ufw reload
```

#### æ­¥éª¤4ï¼šä¿®æ”¹åº”ç”¨é…ç½®

ç¼–è¾‘ `lib/config.dart`ï¼Œåˆ‡æ¢å›åŒ—äº¬æœåŠ¡å™¨ï¼š

```dart
static String get apiBaseUrl {
  // ä½¿ç”¨åŒ—äº¬æœåŠ¡å™¨ï¼ˆè§†é¢‘æ–‡ä»¶åœ¨æ­¤æœåŠ¡å™¨ï¼‰
  return beijingApiUrl;  // http://39.107.137.136:8081
}
```

#### æ­¥éª¤5ï¼šé‡æ–°è¿è¡Œåº”ç”¨

```bash
flutter run -d Dianhua
```

### æ–¹æ¡ˆ2ï¼šå°†è§†é¢‘å¤åˆ¶åˆ°æœ¬åœ°ï¼ˆä¸´æ—¶æµ‹è¯•ï¼‰

å¦‚æœæƒ³åœ¨æœ¬åœ°æµ‹è¯•ï¼Œå¯ä»¥å°†è§†é¢‘ä»åŒ—äº¬æœåŠ¡å™¨å¤åˆ¶åˆ°æœ¬åœ°ï¼š

```bash
# ä»åŒ—äº¬æœåŠ¡å™¨å¤åˆ¶è§†é¢‘
scp -r root@39.107.137.136:/root/videos/åŸåˆ›è§†é¢‘ /Volumes/Expansion/
scp -r root@39.107.137.136:/root/videos/åŸåˆ›æ­Œæ›² /Volumes/Expansion/
```

ç„¶åé‡å¯æœ¬åœ°æœåŠ¡å™¨ï¼š

```bash
# åœæ­¢æ—§æœåŠ¡å™¨
pkill -f video_server.py

# å¯åŠ¨æ–°æœåŠ¡å™¨
export VIDEO_ROOT="/Volumes/Expansion"
cd "/Volumes/Expansion/FlutterProjects/æ¡Œé¢å½±éŸ³æ’­æ”¾å™¨_å®‰è£…åŒ…_20251121_165905"
python3 video_server.py
```

## ğŸ” æµ‹è¯•æ­¥éª¤

### 1. æµ‹è¯•æœåŠ¡å™¨è¿æ¥

```bash
# æµ‹è¯•æœ¬åœ°æœåŠ¡å™¨
curl http://localhost:8081/api/categories
curl http://localhost:8081/api/list/åŸåˆ›è§†é¢‘

# æµ‹è¯•åŒ—äº¬æœåŠ¡å™¨ï¼ˆå¯åŠ¨åï¼‰
curl http://39.107.137.136:8081/api/categories
curl http://39.107.137.136:8081/api/list/åŸåˆ›è§†é¢‘
```

### 2. æµ‹è¯•åº”ç”¨

åº”ç”¨è¿è¡Œåï¼Œæ£€æŸ¥ï¼š
- âœ… åº”ç”¨å¯åŠ¨æ­£å¸¸
- âœ… æ˜¾ç¤º"ç²¾é€‰è§†é¢‘"æ ‡é¢˜
- âœ… æ˜¾ç¤ºè§†é¢‘åˆ—è¡¨ï¼ˆå¦‚æœæœ‰è§†é¢‘ï¼‰
- âœ… ç‚¹å‡»è§†é¢‘å¯ä»¥æ’­æ”¾

### 3. æŸ¥çœ‹æ—¥å¿—

åº”ç”¨è¿è¡Œæ—¶çš„æ—¥å¿—ä¼šæ˜¾ç¤ºï¼š
- `flutter: è¯·æ±‚è§†é¢‘åˆ—è¡¨: http://...`
- `flutter: è§†é¢‘åŠ è½½å®Œæˆï¼Œæ•°é‡: X`
- å¦‚æœæœ‰é”™è¯¯ï¼š`flutter: è¯·æ±‚å¼‚å¸¸: ...`

## ğŸ“ å¿«é€Ÿå‘½ä»¤

### å¯åŠ¨åŒ—äº¬æœåŠ¡å™¨ï¼ˆåœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼‰

```bash
export VIDEO_ROOT="/root/videos"
cd /root/app
nohup python3 video_server.py > /root/server.log 2>&1 &
```

### åˆ‡æ¢åº”ç”¨é…ç½®

```bash
# ç¼–è¾‘ lib/config.dart
# å°† return 'http://192.168.10.103:8081' æ”¹ä¸º
# return beijingApiUrl;
```

### é‡æ–°è¿è¡Œåº”ç”¨

```bash
cd "/Volumes/Expansion/FlutterProjects/æ¡Œé¢å½±éŸ³æ’­æ”¾å™¨_å®‰è£…åŒ…_20251121_165905"
flutter run -d Dianhua
```

## âœ… éªŒè¯æ¸…å•

- [ ] åŒ—äº¬æœåŠ¡å™¨å·²å¯åŠ¨ï¼ˆæˆ–æœ¬åœ°æœ‰è§†é¢‘æ–‡ä»¶ï¼‰
- [ ] é˜²ç«å¢™å·²å¼€æ”¾ 8081 ç«¯å£
- [ ] åº”ç”¨é…ç½®æŒ‡å‘æ­£ç¡®çš„æœåŠ¡å™¨
- [ ] åº”ç”¨å¯ä»¥è¿æ¥æœåŠ¡å™¨
- [ ] åº”ç”¨æ˜¾ç¤ºè§†é¢‘åˆ—è¡¨
- [ ] è§†é¢‘å¯ä»¥æ’­æ”¾
