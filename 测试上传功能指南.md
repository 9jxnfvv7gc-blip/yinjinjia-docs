# 测试上传功能指南

## ✅ 可以测试上传

你可以上传一个MP3文件来测试上传功能。

### ⚠️ 版权提醒

**测试阶段**：
- ✅ 可以上传测试文件（包括别人的歌曲）
- ✅ 用于测试功能是否正常

**正式上架后**：
- ❌ 不能上传有版权的内容
- ✅ 只能上传原创内容
- ⚠️ 否则可能面临版权纠纷

---

## 🧪 测试步骤

### 第一步：确保上传按钮可见

1. **检查管理员模式**
   - 打开：`lib/config.dart`
   - 确认：`isAdmin = true`
   - 如果为`false`，改为`true`并保存

2. **热重载应用**
   - 在终端按 `r`
   - 应该看到绿色的"上传新内容"按钮

### 第二步：点击上传按钮

1. **点击"上传新内容"按钮**
   - 应该弹出底部菜单
   - 显示两个选项：
     - 📹 上传视频
     - 🎵 上传音乐

2. **选择"上传音乐"**

### 第三步：选择MP3文件

1. **选择文件**
   - 从文件选择器中选择MP3文件
   - 可以是任何MP3文件（测试用）

2. **等待上传**
   - 显示上传进度对话框
   - 等待上传完成

### 第四步：查看结果

1. **上传成功**
   - 显示"上传成功！"提示
   - 列表自动刷新
   - 应该能看到新上传的音乐

2. **上传失败**
   - 显示错误信息
   - 检查服务器是否配置

---

## ⚠️ 可能遇到的问题

### 问题1：看不到上传按钮

**原因**：管理员模式未启用

**解决**：
1. 打开 `lib/config.dart`
2. 修改：
   ```dart
   static bool get isAdmin {
     return true; // 改为true
   }
   ```
3. 保存文件
4. 在终端按 `r`（热重载）

---

### 问题2：上传失败 - "连接服务器失败"

**原因**：服务器地址未配置或服务器未运行

**解决**：

#### 方案A：配置本地测试服务器

1. **启动本地Python服务器**（如果有）：
   ```bash
   cd /Volumes/Expansion/FlutterProjects/桌面影音播放器_安装包_20251121_165905
   python3 video_server.py "/你的视频目录"
   ```

2. **修改服务器地址**：
   - 打开 `lib/config.dart`
   - 修改：
     ```dart
     static const String developmentApiUrl = 'http://localhost:8081';
     ```

#### 方案B：配置云端服务器

1. **修改服务器地址**：
   - 打开 `lib/config.dart`
   - 修改：
     ```dart
     static const String productionApiUrl = 'http://你的服务器IP:8080';
     ```

2. **确保服务器正在运行**

---

### 问题3：上传后看不到内容

**原因**：
- 服务器返回的数据格式不对
- 分类路径不匹配

**解决**：
- 检查服务器API返回格式
- 确认分类路径是"原创音乐"

---

## 📝 测试检查清单

### 上传前
- [ ] 上传按钮可见
- [ ] 服务器地址已配置
- [ ] 服务器正在运行（如果使用本地服务器）

### 上传中
- [ ] 能选择文件
- [ ] 显示上传进度
- [ ] 没有错误提示

### 上传后
- [ ] 显示"上传成功"提示
- [ ] 列表自动刷新
- [ ] 能看到新上传的音乐
- [ ] 可以播放新上传的音乐

---

## 🎯 测试建议

### 第一次测试
1. **使用小文件**（<10MB）
   - 上传速度快
   - 容易看到结果

2. **使用MP3格式**
   - 兼容性好
   - 测试音乐上传功能

### 后续测试
1. **测试视频上传**
   - 选择MP4文件
   - 测试视频上传功能

2. **测试大文件**
   - 测试上传大文件
   - 检查进度显示

---

## 💡 提示

1. **如果服务器未配置**：
   - 上传会失败
   - 这是正常的
   - 需要先配置服务器

2. **如果上传成功**：
   - 应该能在列表中看到
   - 可以点击播放测试

3. **如果上传失败**：
   - 查看错误信息
   - 检查服务器配置
   - 检查网络连接

---

## 🚀 快速测试

1. **确保上传按钮可见**（isAdmin = true）
2. **点击"上传新内容"**
3. **选择"上传音乐"**
4. **选择MP3文件**
5. **等待上传完成**

如果上传失败，告诉我错误信息，我会帮你解决！

