# 重新连接服务器后操作步骤

## 🔄 登录过期后需要做什么

### 步骤1：重新连接到服务器

1. **在Workbench中重新连接服务器**
2. **使用密码登录**（你重设的密码）

---

### 步骤2：检查之前的工作

#### 2.1 检查目录是否已创建

在服务器Workbench终端执行：

```bash
# 检查目录
ls -la /root/videos/
ls -la /root/video_server/
```

**如果目录不存在**：需要重新创建

**如果目录存在**：继续下一步

---

#### 2.2 检查video_server.py是否已上传

```bash
# 检查文件是否存在
ls -la /root/video_server/video_server.py
```

**如果文件不存在**：需要上传

**如果文件存在**：检查配置是否正确

---

#### 2.3 检查服务器是否在运行

```bash
# 检查进程
ps aux | grep video_server.py | grep -v grep

# 或检查systemd服务
systemctl status video-server
```

**如果服务器在运行**：✅ 不需要做什么

**如果服务器没有运行**：需要启动

---

## 📋 完整检查清单

### 在服务器Workbench终端执行：

```bash
# 1. 检查目录
ls -la /root/videos/
ls -la /root/video_server/

# 2. 检查文件
ls -la /root/video_server/video_server.py

# 3. 检查服务器
ps aux | grep video_server.py | grep -v grep
systemctl status video-server 2>&1 | head -5
```

---

## ✅ 根据检查结果操作

### 情况1：目录和文件都存在，服务器在运行

**不需要做什么**，服务器已经正常运行。

---

### 情况2：目录和文件存在，但服务器没有运行

**需要启动服务器**：

```bash
# 方法1：直接运行
cd /root/video_server
python3 video_server.py

# 方法2：使用systemd服务
systemctl start video-server
```

---

### 情况3：目录或文件不存在

**需要重新创建**：

```bash
# 创建目录
mkdir -p /root/videos/原创视频
mkdir -p /root/videos/原创歌曲
mkdir -p /root/video_server

# 然后上传video_server.py（使用Workbench文件上传或终端创建）
```

---

## 🚀 快速检查命令

### 在服务器Workbench终端执行：

```bash
# 一键检查所有状态
echo "=== 检查目录 ===" && \
ls -la /root/videos/ 2>&1 && \
echo -e "\n=== 检查服务器目录 ===" && \
ls -la /root/video_server/ 2>&1 && \
echo -e "\n=== 检查服务器进程 ===" && \
ps aux | grep video_server.py | grep -v grep && \
echo -e "\n=== 检查systemd服务 ===" && \
systemctl status video-server 2>&1 | head -5
```

---

## 💡 重要提示

### 关于重新连接：

1. **会话断开**：登录过期后，之前的终端会话可能已断开
2. **需要重新执行命令**：如果之前没有完成，需要重新执行
3. **检查状态**：先检查之前的工作是否还在

### 关于服务器：

1. **如果使用systemd服务**：服务器会在后台运行，即使断开连接也会继续运行
2. **如果直接运行**：断开连接后服务器会停止，需要重新启动

---

## 🎯 推荐操作

### 现在可以：

1. **重新连接到服务器**
2. **执行检查命令**：确认之前的工作状态
3. **根据检查结果**：继续完成未完成的工作

---

**先重新连接服务器，然后执行检查命令，告诉我结果！** 🚀

