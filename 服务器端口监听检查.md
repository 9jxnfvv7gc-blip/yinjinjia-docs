# 🔍 服务器端口监听检查

## 📋 问题

- ✅ 防火墙已开放 8081 端口
- ✅ 安全组规则已配置
- ❌ 从本地Mac仍然无法访问

## 🔍 在服务器终端执行

### 检查端口监听

```bash
# 检查8081端口监听情况
netstat -tlnp | grep 8081

# 或者使用 ss
ss -tlnp | grep 8081
```

### 应该看到的结果

**正确的监听**（监听所有接口）：
```
tcp        0      0 0.0.0.0:8081            0.0.0.0:*               LISTEN      150988/python3
```
或
```
tcp6       0      0 :::8081                 :::*                    LISTEN      150988/python3
```

**错误的监听**（只监听本地）：
```
tcp        0      0 127.0.0.1:8081          0.0.0.0:*               LISTEN      150988/python3
```

### 如果只监听本地

需要检查 `video_server.py` 代码，确保监听所有接口：

```python
# 正确：监听所有接口
with ReusableTCPServer(("", PORT), VideoHandler) as httpd:

# 错误：只监听本地
with ReusableTCPServer(("127.0.0.1", PORT), VideoHandler) as httpd:
```

## 🌐 检查安全组规则

在阿里云控制台确认：
1. **端口范围**：8081
2. **协议**：TCP
3. **授权对象**：0.0.0.0/0（允许所有IP）
4. **方向**：入站
5. **优先级**：不是最低（可能被其他规则覆盖）

## 🔧 如果端口监听正确，但仍无法访问

可能是：
1. **安全组规则被其他规则覆盖**：检查规则优先级
2. **网络路由问题**：尝试从其他网络访问
3. **服务器负载过高**：检查服务器资源使用情况

## 📝 临时解决方案

如果外部无法访问，可以：
1. 使用VPN连接到服务器网络
2. 或者使用SSH隧道：
   ```bash
   ssh -L 8081:localhost:8081 root@47.243.177.166
   ```
   然后应用连接 `http://localhost:8081`


