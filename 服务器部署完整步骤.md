# æœåŠ¡å™¨éƒ¨ç½²å®Œæ•´æ­¥éª¤ - è®©ç”¨æˆ·æ‰“å¼€åº”ç”¨å°±èƒ½çœ‹åˆ°å†…å®¹

## ðŸŽ¯ ç›®æ ‡

1. âœ… è§†é¢‘å’Œæ­Œæ›²å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Š
2. âœ… ç”¨æˆ·æ‰“å¼€åº”ç”¨å°±èƒ½çœ‹åˆ°å†…å®¹ï¼ˆåƒæŠ–éŸ³é‚£æ ·ï¼‰
3. âœ… æ‰€æœ‰ç”¨æˆ·çœ‹åˆ°ç›¸åŒå†…å®¹
4. âœ… å¯ä»¥ä¸Šæž¶åˆ°App Store

---

## ðŸ“‹ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1ï¼šåœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²video_server.py

#### 1.1 åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºç›®å½•

åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
# åˆ›å»ºè§†é¢‘å­˜å‚¨ç›®å½•
mkdir -p /root/videos/åŽŸåˆ›è§†é¢‘
mkdir -p /root/videos/åŽŸåˆ›æ­Œæ›²

# åˆ›å»ºæœåŠ¡å™¨ç›®å½•
mkdir -p /root/video_server
```

---

#### 1.2 ä¸Šä¼ video_server.pyåˆ°æœåŠ¡å™¨

**æ–¹æ³•Aï¼šä½¿ç”¨Workbenchæ–‡ä»¶ä¸Šä¼ **

1. åœ¨Workbenchä¸­ä½¿ç”¨æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
2. ä¸Šä¼  `video_server.py` åˆ° `/root/video_server/`

**æ–¹æ³•Bï¼šä½¿ç”¨scp**

åœ¨æœ¬åœ°Macç»ˆç«¯æ‰§è¡Œï¼š

```bash
scp /Volumes/Expansion/FlutterProjects/æ¡Œé¢å½±éŸ³æ’­æ”¾å™¨_å®‰è£…åŒ…_20251121_165905/video_server.py root@47.243.177.166:/root/video_server/
```

---

#### 1.3 ä¿®æ”¹æœåŠ¡å™¨é…ç½®

åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /root/video_server

# ä¿®æ”¹VIDEO_ROOTä¸ºæœåŠ¡å™¨è·¯å¾„
sed -i 's|VIDEO_ROOT = "/Volumes/Expansion"|VIDEO_ROOT = "/root/videos"|g' video_server.py

# éªŒè¯ä¿®æ”¹
grep "VIDEO_ROOT" video_server.py
```

**åº”è¯¥æ˜¾ç¤º**ï¼š`VIDEO_ROOT = "/root/videos"`

---

#### 1.4 å¯åŠ¨æœåŠ¡å™¨

åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /root/video_server
python3 video_server.py
```

**åº”è¯¥çœ‹åˆ°**ï¼š
```
å¯åŠ¨è§†é¢‘æœåŠ¡å™¨...
ç«¯å£: 8081
è§†é¢‘æ ¹ç›®å½•: /root/videos
Serving at port 8081
```

---

#### 1.5 é…ç½®è‡ªåŠ¨å¯åŠ¨ï¼ˆæŽ¨èï¼‰

åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
# åˆ›å»ºsystemdæœåŠ¡æ–‡ä»¶
cat > /etc/systemd/system/video-server.service << 'EOF'
[Unit]
Description=Video Server
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/video_server
ExecStart=/usr/bin/python3 /root/video_server/video_server.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# é‡æ–°åŠ è½½systemd
systemctl daemon-reload

# å¯ç”¨æœåŠ¡ï¼ˆå¼€æœºè‡ªå¯ï¼‰
systemctl enable video-server

# å¯åŠ¨æœåŠ¡
systemctl start video-server

# æŸ¥çœ‹çŠ¶æ€
systemctl status video-server
```

---

### æ­¥éª¤2ï¼šä¸Šä¼ å†…å®¹åˆ°æœåŠ¡å™¨

#### 2.1 ä¸Šä¼ è§†é¢‘

åœ¨æœ¬åœ°Macç»ˆç«¯æ‰§è¡Œï¼š

```bash
rsync -avz --progress \
  /Volumes/Expansion/åŽŸåˆ›è§†é¢‘/ \
  root@47.243.177.166:/root/videos/åŽŸåˆ›è§†é¢‘/
```

**æˆ–è€…ä½¿ç”¨Workbenchæ–‡ä»¶ä¸Šä¼ **

---

#### 2.2 ä¸Šä¼ æ­Œæ›²

```bash
rsync -avz --progress \
  /Volumes/Expansion/åŽŸåˆ›æ­Œæ›²/ \
  root@47.243.177.166:/root/videos/åŽŸåˆ›æ­Œæ›²/
```

---

### æ­¥éª¤3ï¼šæµ‹è¯•æœåŠ¡å™¨

#### 3.1 åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•

è®¿é—®ï¼š`http://47.243.177.166:8081`

åº”è¯¥çœ‹åˆ°æœåŠ¡å™¨çŠ¶æ€é¡µé¢ã€‚

---

#### 3.2 æµ‹è¯•API

åœ¨æµè§ˆå™¨æˆ–ç»ˆç«¯ä¸­ï¼š

```bash
# æµ‹è¯•åˆ—è¡¨API
curl http://47.243.177.166:8081/api/list/åŽŸåˆ›è§†é¢‘
```

åº”è¯¥è¿”å›žè§†é¢‘åˆ—è¡¨JSONã€‚

---

### æ­¥éª¤4ï¼šä¿®æ”¹åº”ç”¨é…ç½®ï¼ˆå·²å®Œæˆï¼‰

**å·²ä¿®æ”¹ `lib/config.dart`**ï¼š
- âœ… ç”Ÿäº§çŽ¯å¢ƒä½¿ç”¨æœåŠ¡å™¨åœ°å€ï¼š`http://47.243.177.166:8081`
- âœ… é»˜è®¤ä½¿ç”¨æœåŠ¡å™¨åœ°å€ï¼ˆè®©æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½çœ‹åˆ°å†…å®¹ï¼‰

---

### æ­¥éª¤5ï¼šé‡æ–°æž„å»ºåº”ç”¨

#### 5.1 æž„å»ºiOSï¼ˆç”¨äºŽApp Storeï¼‰

```bash
cd "/Volumes/Expansion/FlutterProjects/æ¡Œé¢å½±éŸ³æ’­æ”¾å™¨_å®‰è£…åŒ…_20251121_165905"

# æ‰“å¼€Xcodeé¡¹ç›®
open ios/Runner.xcworkspace
```

**åœ¨Xcodeä¸­**ï¼š
1. é€‰æ‹© "Product" â†’ "Archive"
2. ç­‰å¾…æž„å»ºå®Œæˆ
3. é€‰æ‹© "Distribute App" â†’ "App Store Connect"
4. ä¸Šä¼ 

---

#### 5.2 æž„å»ºAndroid

```bash
# åœ¨æœåŠ¡å™¨ä¸Šé‡æ–°æž„å»ºï¼ˆæˆ–æœ¬åœ°æž„å»ºï¼‰
cd /root/app
source ~/.bashrc
flutter build apk --release
```

---

## ðŸ” éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥æœåŠ¡å™¨è¿è¡Œ

åœ¨æœåŠ¡å™¨Workbenchç»ˆç«¯æ‰§è¡Œï¼š

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status video-server

# æˆ–æ£€æŸ¥è¿›ç¨‹
ps aux | grep video_server.py | grep -v grep
```

---

### 2. æ£€æŸ¥å†…å®¹

```bash
# æ£€æŸ¥è§†é¢‘æ–‡ä»¶
ls -la /root/videos/åŽŸåˆ›è§†é¢‘/

# æ£€æŸ¥æ­Œæ›²æ–‡ä»¶
ls -la /root/videos/åŽŸåˆ›æ­Œæ›²/
```

---

### 3. æµ‹è¯•API

```bash
# æµ‹è¯•è§†é¢‘åˆ—è¡¨
curl http://47.243.177.166:8081/api/list/åŽŸåˆ›è§†é¢‘

# æµ‹è¯•æ­Œæ›²åˆ—è¡¨
curl http://47.243.177.166:8081/api/list/åŽŸåˆ›æ­Œæ›²
```

---

## ðŸ“ å¿«é€Ÿå‘½ä»¤æ€»ç»“

### æœåŠ¡å™¨ç«¯ï¼š

```bash
# åˆ›å»ºç›®å½•
mkdir -p /root/videos/åŽŸåˆ›è§†é¢‘ /root/videos/åŽŸåˆ›æ­Œæ›² /root/video_server

# ä¿®æ”¹é…ç½®
sed -i 's|VIDEO_ROOT = "/Volumes/Expansion"|VIDEO_ROOT = "/root/videos"|g' /root/video_server/video_server.py

# å¯åŠ¨æœåŠ¡å™¨
cd /root/video_server && python3 video_server.py

# æˆ–ä½¿ç”¨systemdæœåŠ¡
systemctl start video-server
```

### ä¸Šä¼ å†…å®¹ï¼š

```bash
# ä¸Šä¼ è§†é¢‘
rsync -avz --progress /Volumes/Expansion/åŽŸåˆ›è§†é¢‘/ root@47.243.177.166:/root/videos/åŽŸåˆ›è§†é¢‘/

# ä¸Šä¼ æ­Œæ›²
rsync -avz --progress /Volumes/Expansion/åŽŸåˆ›æ­Œæ›²/ root@47.243.177.166:/root/videos/åŽŸåˆ›æ­Œæ›²/
```

### åº”ç”¨æž„å»ºï¼š

```bash
# iOS
open ios/Runner.xcworkspace

# Android
flutter build apk --release
```

---

## ðŸ’¡ é‡è¦æç¤º

### å…³äºŽæœåŠ¡å™¨ï¼š

1. **æœåŠ¡å™¨éœ€è¦ä¸€ç›´è¿è¡Œ**ï¼šä½¿ç”¨systemdæœåŠ¡è‡ªåŠ¨å¯åŠ¨
2. **å¼€æ”¾ç«¯å£8081**ï¼šç¡®ä¿é˜²ç«å¢™å…è®¸ï¼ˆå·²é…ç½®ï¼‰
3. **å­˜å‚¨ç©ºé—´**ï¼šç¡®ä¿æœåŠ¡å™¨æœ‰è¶³å¤Ÿç©ºé—´

### å…³äºŽåº”ç”¨ï¼š

1. **é…ç½®å·²ä¿®æ”¹**ï¼šåº”ç”¨é»˜è®¤è¿žæŽ¥åˆ°æœåŠ¡å™¨
2. **æ‰€æœ‰ç”¨æˆ·çœ‹åˆ°ç›¸åŒå†…å®¹**ï¼šåƒæŠ–éŸ³é‚£æ ·
3. **å¯ä»¥éšæ—¶æ›´æ–°**ï¼šåœ¨æœåŠ¡å™¨ä¸Šæ·»åŠ /åˆ é™¤å†…å®¹

### å…³äºŽå†…å®¹ï¼š

1. **ä¸Šä¼ åˆ°æœåŠ¡å™¨**ï¼šæ‰€æœ‰å†…å®¹å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Š
2. **ç”¨æˆ·æ‰“å¼€åº”ç”¨å°±èƒ½çœ‹åˆ°**ï¼šè‡ªåŠ¨ä»ŽæœåŠ¡å™¨åŠ è½½
3. **å¯ä»¥éšæ—¶æ›´æ–°**ï¼šä¸éœ€è¦æ›´æ–°åº”ç”¨

---

## ðŸŽ¯ çŽ°åœ¨å¯ä»¥åšä»€ä¹ˆ

### å·²å®Œæˆï¼š

1. âœ… ä¿®æ”¹åº”ç”¨é…ç½®è¿žæŽ¥åˆ°æœåŠ¡å™¨
2. âœ… æä¾›æœåŠ¡å™¨éƒ¨ç½²æ­¥éª¤

### éœ€è¦æ‰§è¡Œï¼š

1. â³ åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²video_server.py
2. â³ ä¸Šä¼ å†…å®¹åˆ°æœåŠ¡å™¨
3. â³ é‡æ–°æž„å»ºåº”ç”¨

---

**æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤æ“ä½œï¼Œç”¨æˆ·æ‰“å¼€åº”ç”¨å°±èƒ½çœ‹åˆ°å†…å®¹äº†ï¼** ðŸš€

