# 修复服务器和批量上传

## 1. 服务器连接问题

### 在Workbench终端执行：

```bash
# 1. 等待几秒让服务器完全启动
sleep 5

# 2. 检查服务状态
systemctl status video-server

# 3. 检查端口是否被占用
lsof -i :8081

# 4. 检查服务器日志
tail -30 /var/log/video-server.log
tail -30 /var/log/video-server-error.log

# 5. 检查VIDEO_ROOT配置（可能又变回去了）
grep -n "VIDEO_ROOT" /root/video_server/video_server.py | head -1

# 6. 如果VIDEO_ROOT不对，修复它
sed -i '20s|VIDEO_ROOT = "/Volumes/Expansion"|VIDEO_ROOT = "/root/videos"|g' /root/video_server/video_server.py

# 7. 重启服务
systemctl restart video-server
sleep 3

# 8. 测试API
curl "http://localhost:8081/api/list/$(python3 -c "from urllib.parse import quote; print(quote('原创视频'))")"
```

---

## 2. 批量上传功能

### 已修复
- ✅ 代码已设置 `allowMultiple: true`
- ✅ 添加了提示信息

### 使用方法
1. **点击"上传视频"或"上传歌曲"**
2. **在文件选择器中**：
   - **macOS**: 按住 `Cmd` 键，然后点击多个文件
   - **Windows**: 按住 `Ctrl` 键，然后点击多个文件
   - **Linux**: 按住 `Ctrl` 键，然后点击多个文件
3. **选择完成后点击"打开"**
4. **应该看到批量上传进度对话框**

### 如果还是不能多选
可能是文件选择器的限制。可以尝试：
- 使用 `Shift` 键选择连续的文件
- 或者检查文件选择器是否支持多选（某些系统可能有限制）

---

## 3. Flutter版本更新

**建议**：暂时不需要更新，除非：
- 有重要的安全更新
- 需要新版本的特定功能
- 当前版本有严重bug

可以稍后再更新。

---

**先执行服务器检查命令，把结果发给我！** 🔍

