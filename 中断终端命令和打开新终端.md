# 中断终端命令和打开新终端

## 🛑 方法1：中断当前命令（推荐）

### 如果终端正在运行某个命令（比如查看日志）：

1. **按 `Ctrl+C`** 中断当前命令
2. 应该会返回到命令提示符：`root@iZj6cg78ov73x6cxbephc1Z:~/video_server#`
3. 然后可以输入新命令

---

## 🆕 方法2：打开新的终端窗口

### 在Workbench中：

1. 点击 **文件** 菜单
2. 选择 **打开新终端** 或 **新建终端**
3. 会打开一个新的终端窗口
4. 在新终端中执行命令

---

## 📋 完整操作流程

### 步骤1：中断当前命令

在正在运行的终端中：
- 按 `Ctrl+C` 中断

---

### 步骤2：停止服务器

```bash
systemctl stop video-server
```

---

### 步骤3：恢复备份文件

```bash
cd /root/video_server
cp video_server.py.bak video_server.py
```

---

### 步骤4：编辑文件

```bash
nano video_server.py
```

---

### 步骤5：添加调试信息

找到第638行左右（`if os.path.exists(category_path):`），在这一行下面添加：
```python
                print(f"目录存在，开始扫描文件...")
```

找到第644行左右（`if ext in all_media_extensions:`），在这一行上面添加：
```python
                        print(f"文件: {f}, 扩展名: {ext}, 在列表中: {ext in all_media_extensions}")
```

找到第676行左右（`file_list.append`循环结束后），添加：
```python
                print(f"找到 {len(file_list)} 个文件")
```

---

### 步骤6：保存文件

- 按 `Ctrl+O` 保存
- 按 `Enter` 确认
- 按 `Ctrl+X` 退出

---

### 步骤7：检查语法

```bash
python3 -m py_compile /root/video_server/video_server.py
```

---

### 步骤8：启动服务器

```bash
systemctl start video-server
```

---

### 步骤9：检查服务状态

```bash
systemctl status video-server
```

---

## 🎯 现在可以执行

1. **按 `Ctrl+C` 中断当前命令**
2. **停止服务器**（`systemctl stop video-server`）
3. **恢复备份**（`cp video_server.py.bak video_server.py`）
4. **编辑文件**（`nano video_server.py`）
5. **添加调试信息**
6. **保存文件**
7. **启动服务器**（`systemctl start video-server`）

---

## 💡 提示

- **如果按 `Ctrl+C` 没有反应**，尝试按多次
- **或者打开新的终端窗口**，在新终端中执行命令
- **服务器停止后**，可以安全地编辑文件

---

**先按 `Ctrl+C` 中断当前命令，然后执行新命令！** ⌨️

