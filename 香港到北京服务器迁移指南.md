# ðŸš€ é¦™æ¸¯æœåŠ¡å™¨è¿ç§»åˆ°åŒ—äº¬æœåŠ¡å™¨æŒ‡å—

## ðŸ“‹ è¿ç§»åŽŸå› 

- âœ… é¦™æ¸¯æœåŠ¡å™¨æ— æ³•è¿›è¡Œ ICP å¤‡æ¡ˆ
- âœ… åœ¨ä¸­å›½å¤§é™†ä¸Šæž¶åº”ç”¨éœ€è¦å¤‡æ¡ˆ
- âœ… åŒ—äº¬æœåŠ¡å™¨å¯ä»¥å¤‡æ¡ˆ

## âœ… è¿ç§»å¯è¡Œæ€§

**å®Œå…¨å¯ä»¥è¿ç§»ï¼** é˜¿é‡Œäº‘æ”¯æŒï¼š
- è·¨åœ°åŸŸè¿ç§»
- æ•°æ®è¿ç§»
- æœåŠ¡è¿ç§»

---

## ðŸ“¦ éœ€è¦è¿ç§»çš„å†…å®¹

### 1. é¡¹ç›®ä»£ç 
- **ä½ç½®**ï¼š`/root/app`
- **å†…å®¹**ï¼šFlutter é¡¹ç›®ä»£ç 
- **å¤§å°**ï¼šçº¦å‡ ç™¾ MB

### 2. è§†é¢‘æœåŠ¡å™¨
- **ä½ç½®**ï¼š`/root/video_server`
- **æ–‡ä»¶**ï¼š`video_server.py`
- **é…ç½®**ï¼šç«¯å£ 8081

### 3. è§†é¢‘æ–‡ä»¶
- **ä½ç½®**ï¼š`/root/videos`
- **å†…å®¹**ï¼šåŽŸåˆ›è§†é¢‘å’Œæ­Œæ›²
- **å¤§å°**ï¼šæ ¹æ®å®žé™…æ–‡ä»¶å¤§å°

### 4. å·²ç¼–è¯‘çš„ APK
- **ä½ç½®**ï¼š`/root/app/build/app/outputs/flutter-apk/app-release.apk`
- **å¤§å°**ï¼š47MB

### 5. ç³»ç»ŸçŽ¯å¢ƒ
- Flutter SDK
- Android SDK
- Java JDK
- Python 3
- å…¶ä»–ä¾èµ–

### 6. æœåŠ¡é…ç½®
- systemd æœåŠ¡ï¼ˆvideo-server.serviceï¼‰
- é˜²ç«å¢™è§„åˆ™
- å®‰å…¨ç»„è§„åˆ™

---

## ðŸš€ è¿ç§»æ­¥éª¤

### é˜¶æ®µ1ï¼šå‡†å¤‡åŒ—äº¬æœåŠ¡å™¨

#### 1.1 è´­ä¹°/åˆ›å»ºåŒ—äº¬æœåŠ¡å™¨
- åœ¨é˜¿é‡Œäº‘æŽ§åˆ¶å°åˆ›å»ºåŒ—äº¬åœ°åŸŸçš„ ECS å®žä¾‹
- å»ºè®®é…ç½®ï¼š
  - CPUï¼š2æ ¸æˆ–ä»¥ä¸Š
  - å†…å­˜ï¼š4GB æˆ–ä»¥ä¸Š
  - ç³»ç»Ÿç›˜ï¼š40GB æˆ–ä»¥ä¸Š
  - æ“ä½œç³»ç»Ÿï¼šUbuntu 22.04 LTSï¼ˆä¸Žé¦™æ¸¯æœåŠ¡å™¨ä¸€è‡´ï¼‰

#### 1.2 é…ç½®å®‰å…¨ç»„
- å¼€æ”¾ç«¯å£ï¼š
  - 22ï¼ˆSSHï¼‰
  - 8081ï¼ˆè§†é¢‘æœåŠ¡å™¨ï¼‰
  - 3389ï¼ˆè¿œç¨‹æ¡Œé¢ï¼Œå¦‚æžœéœ€è¦ï¼‰
  - 5900ï¼ˆVNCï¼Œå¦‚æžœéœ€è¦ï¼‰

---

### é˜¶æ®µ2ï¼šè¿ç§»æ•°æ®

#### æ–¹æ³•1ï¼šä½¿ç”¨ scp ç›´æŽ¥ä¼ è¾“ï¼ˆæŽ¨èï¼Œé€‚åˆå°æ–‡ä»¶ï¼‰

##### 2.1 è¿ç§»é¡¹ç›®ä»£ç 
```bash
# åœ¨æœ¬åœ° Mac æ‰§è¡Œ
# åŽ‹ç¼©é¡¹ç›®ä»£ç 
ssh root@47.243.177.166 "cd /root && tar -czf app.tar.gz app"

# ä¸‹è½½åˆ°æœ¬åœ°
scp root@47.243.177.166:/root/app.tar.gz ~/Desktop/

# ä¸Šä¼ åˆ°åŒ—äº¬æœåŠ¡å™¨ï¼ˆæ›¿æ¢ä¸ºæ–°æœåŠ¡å™¨IPï¼‰
scp ~/Desktop/app.tar.gz root@æ–°æœåŠ¡å™¨IP:/root/

# åœ¨åŒ—äº¬æœåŠ¡å™¨è§£åŽ‹
ssh root@æ–°æœåŠ¡å™¨IP "cd /root && tar -xzf app.tar.gz"
```

##### 2.2 è¿ç§»è§†é¢‘æœåŠ¡å™¨
```bash
# åœ¨æœ¬åœ° Mac æ‰§è¡Œ
# åŽ‹ç¼©è§†é¢‘æœåŠ¡å™¨ç›®å½•
ssh root@47.243.177.166 "cd /root && tar -czf video_server.tar.gz video_server"

# ä¸‹è½½åˆ°æœ¬åœ°
scp root@47.243.177.166:/root/video_server.tar.gz ~/Desktop/

# ä¸Šä¼ åˆ°åŒ—äº¬æœåŠ¡å™¨
scp ~/Desktop/video_server.tar.gz root@æ–°æœåŠ¡å™¨IP:/root/

# åœ¨åŒ—äº¬æœåŠ¡å™¨è§£åŽ‹
ssh root@æ–°æœåŠ¡å™¨IP "cd /root && tar -xzf video_server.tar.gz"
```

##### 2.3 è¿ç§»è§†é¢‘æ–‡ä»¶ï¼ˆå¦‚æžœæ–‡ä»¶è¾ƒå¤§ï¼Œå¯èƒ½éœ€è¦æ—¶é—´ï¼‰
```bash
# åœ¨æœ¬åœ° Mac æ‰§è¡Œ
# åŽ‹ç¼©è§†é¢‘æ–‡ä»¶ï¼ˆå¦‚æžœæ–‡ä»¶å¾ˆå¤§ï¼Œå¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´ï¼‰
ssh root@47.243.177.166 "cd /root && tar -czf videos.tar.gz videos"

# ä¸‹è½½åˆ°æœ¬åœ°ï¼ˆå¦‚æžœæ–‡ä»¶å¾ˆå¤§ï¼Œå»ºè®®ä½¿ç”¨ rsync æˆ–ç›´æŽ¥ä¼ è¾“ï¼‰
scp root@47.243.177.166:/root/videos.tar.gz ~/Desktop/

# ä¸Šä¼ åˆ°åŒ—äº¬æœåŠ¡å™¨
scp ~/Desktop/videos.tar.gz root@æ–°æœåŠ¡å™¨IP:/root/

# åœ¨åŒ—äº¬æœåŠ¡å™¨è§£åŽ‹
ssh root@æ–°æœåŠ¡å™¨IP "cd /root && tar -xzf videos.tar.gz"
```

#### æ–¹æ³•2ï¼šä½¿ç”¨ rsyncï¼ˆæŽ¨èï¼Œé€‚åˆå¤§æ–‡ä»¶ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼‰

```bash
# åœ¨æœ¬åœ° Mac æ‰§è¡Œ
# ç›´æŽ¥åŒæ­¥ï¼ˆä¸éœ€è¦å…ˆåŽ‹ç¼©ï¼‰
rsync -avz --progress root@47.243.177.166:/root/app/ root@æ–°æœåŠ¡å™¨IP:/root/app/
rsync -avz --progress root@47.243.177.166:/root/video_server/ root@æ–°æœåŠ¡å™¨IP:/root/video_server/
rsync -avz --progress root@47.243.177.166:/root/videos/ root@æ–°æœåŠ¡å™¨IP:/root/videos/
```

#### æ–¹æ³•3ï¼šä½¿ç”¨é˜¿é‡Œäº‘å¿«ç…§å’Œé•œåƒï¼ˆæœ€å¿«ï¼Œä½†éœ€è¦åœæœºï¼‰

1. ä¸ºé¦™æ¸¯æœåŠ¡å™¨åˆ›å»ºå¿«ç…§
2. åŸºäºŽå¿«ç…§åˆ›å»ºè‡ªå®šä¹‰é•œåƒ
3. åœ¨åŒ—äº¬åœ°åŸŸä½¿ç”¨è¯¥é•œåƒåˆ›å»ºæ–°æœåŠ¡å™¨
4. ä¼˜ç‚¹ï¼šç³»ç»ŸçŽ¯å¢ƒã€é…ç½®ã€æ•°æ®å…¨éƒ¨è¿ç§»
5. ç¼ºç‚¹ï¼šéœ€è¦åœæœºï¼Œé¦™æ¸¯æœåŠ¡å™¨æš‚æ—¶ä¸å¯ç”¨

---

### é˜¶æ®µ3ï¼šé…ç½®åŒ—äº¬æœåŠ¡å™¨

#### 3.1 å®‰è£…ç³»ç»ŸçŽ¯å¢ƒ

```bash
# åœ¨åŒ—äº¬æœåŠ¡å™¨æ‰§è¡Œ
# æ›´æ–°ç³»ç»Ÿ
apt update && apt upgrade -y

# å®‰è£… Python 3
apt install python3 python3-pip -y

# å®‰è£… Flutterï¼ˆå¦‚æžœéœ€è¦ç¼–è¯‘ APKï¼‰
# å‚è€ƒä¹‹å‰çš„ Flutter å®‰è£…æ­¥éª¤

# å®‰è£… Android SDK å’Œ Javaï¼ˆå¦‚æžœéœ€è¦ç¼–è¯‘ APKï¼‰
# å‚è€ƒä¹‹å‰çš„ Android å¼€å‘çŽ¯å¢ƒé…ç½®
```

#### 3.2 é…ç½®è§†é¢‘æœåŠ¡å™¨

```bash
# åœ¨åŒ—äº¬æœåŠ¡å™¨æ‰§è¡Œ
cd /root/video_server

# æ£€æŸ¥é…ç½®ï¼ˆVIDEO_ROOT åº”è¯¥å·²ç»æ˜¯ /root/videosï¼‰
grep "VIDEO_ROOT" video_server.py

# åˆ›å»º systemd æœåŠ¡
cat > /etc/systemd/system/video-server.service << 'EOF'
[Unit]
Description=Video Server
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/video_server
ExecStart=/usr/bin/python3 /root/video_server/video_server.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# å¯åŠ¨æœåŠ¡
systemctl daemon-reload
systemctl enable video-server
systemctl start video-server

# æ£€æŸ¥çŠ¶æ€
systemctl status video-server
```

#### 3.3 é…ç½®é˜²ç«å¢™

```bash
# åœ¨åŒ—äº¬æœåŠ¡å™¨æ‰§è¡Œ
# å¼€æ”¾ 8081 ç«¯å£
ufw allow 8081/tcp
ufw reload
```

#### 3.4 é…ç½®é˜¿é‡Œäº‘å®‰å…¨ç»„

åœ¨é˜¿é‡Œäº‘æŽ§åˆ¶å°ï¼š
1. é€‰æ‹©åŒ—äº¬æœåŠ¡å™¨
2. è¿›å…¥å®‰å…¨ç»„é…ç½®
3. æ·»åŠ å…¥æ–¹å‘è§„åˆ™ï¼š
   - ç«¯å£ï¼š8081
   - åè®®ï¼šTCP
   - æŽˆæƒå¯¹è±¡ï¼š0.0.0.0/0

---

### é˜¶æ®µ4ï¼šæ›´æ–°åº”ç”¨ä»£ç 

#### 4.1 æ›´æ–°æœåŠ¡å™¨ IP åœ°å€

éœ€è¦ä¿®æ”¹åº”ç”¨ä»£ç ä¸­çš„æœåŠ¡å™¨åœ°å€ï¼š

**æ–‡ä»¶**ï¼š`lib/simple_home_page.dart` æˆ–å…¶ä»–ä½¿ç”¨æœåŠ¡å™¨åœ°å€çš„æ–‡ä»¶

**æŸ¥æ‰¾å¹¶æ›¿æ¢**ï¼š
```dart
// æ—§åœ°å€
'http://47.243.177.166:8081'

// æ–°åœ°å€ï¼ˆæ›¿æ¢ä¸ºåŒ—äº¬æœåŠ¡å™¨IPï¼‰
'http://æ–°æœåŠ¡å™¨IP:8081'
```

#### 4.2 é‡æ–°ç¼–è¯‘åº”ç”¨

```bash
# åœ¨æœ¬åœ° Mac æ‰§è¡Œ
cd "/Volumes/Expansion/FlutterProjects/æ¡Œé¢å½±éŸ³æ’­æ”¾å™¨_å®‰è£…åŒ…_20251121_165905"

# æ›´æ–°ä»£ç ä¸­çš„æœåŠ¡å™¨åœ°å€åŽ
flutter build apk --release
flutter build ios --release
```

---

### é˜¶æ®µ5ï¼šæµ‹è¯•æ–°æœåŠ¡å™¨

#### 5.1 æµ‹è¯•è§†é¢‘æœåŠ¡å™¨

```bash
# åœ¨åŒ—äº¬æœåŠ¡å™¨æ‰§è¡Œ
curl http://localhost:8081/api/list/åŽŸåˆ›è§†é¢‘

# ä»Žå¤–éƒ¨æµ‹è¯•ï¼ˆåœ¨æœ¬åœ° Mac æ‰§è¡Œï¼‰
curl http://æ–°æœåŠ¡å™¨IP:8081/api/list/åŽŸåˆ›è§†é¢‘
```

#### 5.2 æµ‹è¯•åº”ç”¨

1. å®‰è£…æ–°ç¼–è¯‘çš„ APK
2. æ‰“å¼€åº”ç”¨
3. æ£€æŸ¥æ˜¯å¦èƒ½æ­£å¸¸åŠ è½½è§†é¢‘å’ŒéŸ³ä¹

---

## ðŸ“ ICP å¤‡æ¡ˆæµç¨‹

### å¤‡æ¡ˆè¦æ±‚

1. **æœåŠ¡å™¨è¦æ±‚**ï¼š
   - âœ… å¿…é¡»æ˜¯å¤§é™†æœåŠ¡å™¨ï¼ˆåŒ—äº¬ã€ä¸Šæµ·ã€æ­å·žç­‰ï¼‰
   - âœ… æœåŠ¡å™¨å¿…é¡»è¿è¡Œè‡³å°‘ 3 ä¸ªæœˆ
   - âœ… éœ€è¦å®žåè®¤è¯

2. **åŸŸåè¦æ±‚**ï¼ˆå¦‚æžœéœ€è¦åŸŸåï¼‰ï¼š
   - âœ… åŸŸåå·²å®žåè®¤è¯
   - âœ… åŸŸåæœªå¤‡æ¡ˆè¿‡

3. **ææ–™å‡†å¤‡**ï¼š
   - èº«ä»½è¯æ­£åé¢
   - è¥ä¸šæ‰§ç…§ï¼ˆå¦‚æžœæ˜¯ä¼ä¸šï¼‰
   - å¤‡æ¡ˆæœåŠ¡å·ï¼ˆä»Žé˜¿é‡Œäº‘èŽ·å–ï¼‰

### å¤‡æ¡ˆæ­¥éª¤

1. **ç™»å½•é˜¿é‡Œäº‘å¤‡æ¡ˆç³»ç»Ÿ**
   - è®¿é—®ï¼šhttps://beian.aliyun.com/
   - ä½¿ç”¨é˜¿é‡Œäº‘è´¦å·ç™»å½•

2. **å¡«å†™å¤‡æ¡ˆä¿¡æ¯**
   - é€‰æ‹©å¤‡æ¡ˆç±»åž‹ï¼ˆä¸ªäºº/ä¼ä¸šï¼‰
   - å¡«å†™ä¸»ä½“ä¿¡æ¯
   - å¡«å†™ç½‘ç«™ä¿¡æ¯
   - ä¸Šä¼ è¯ä»¶ç…§ç‰‡

3. **æäº¤å®¡æ ¸**
   - é˜¿é‡Œäº‘åˆå®¡ï¼ˆ1-2 ä¸ªå·¥ä½œæ—¥ï¼‰
   - ç®¡å±€å®¡æ ¸ï¼ˆ7-20 ä¸ªå·¥ä½œæ—¥ï¼‰

4. **å¤‡æ¡ˆå®Œæˆ**
   - æ”¶åˆ°å¤‡æ¡ˆå·
   - åœ¨ç½‘ç«™åº•éƒ¨æ·»åŠ å¤‡æ¡ˆå·

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### 1. IP åœ°å€å˜æ›´

- âœ… åº”ç”¨ä»£ç ä¸­çš„æœåŠ¡å™¨ IP éœ€è¦æ›´æ–°
- âœ… éœ€è¦é‡æ–°ç¼–è¯‘åº”ç”¨
- âœ… éœ€è¦é‡æ–°ä¸Šæž¶åº”ç”¨å•†åº—

### 2. æ•°æ®è¿ç§»æ—¶é—´

- å°æ–‡ä»¶ï¼ˆä»£ç ã€é…ç½®ï¼‰ï¼šå‡ åˆ†é’Ÿ
- å¤§æ–‡ä»¶ï¼ˆè§†é¢‘ï¼‰ï¼šå¯èƒ½éœ€è¦å‡ å°æ—¶åˆ°å‡ å¤©
- å»ºè®®ä½¿ç”¨ rsync æ”¯æŒæ–­ç‚¹ç»­ä¼ 

### 3. æœåŠ¡ä¸­æ–­

- è¿ç§»æœŸé—´ï¼Œé¦™æ¸¯æœåŠ¡å™¨å¯èƒ½æš‚æ—¶ä¸å¯ç”¨
- å»ºè®®åœ¨ä½Žå³°æœŸè¿›è¡Œè¿ç§»
- æˆ–è€…å…ˆè¿ç§»åˆ°åŒ—äº¬æœåŠ¡å™¨ï¼Œæµ‹è¯•æ— è¯¯åŽå†åœç”¨é¦™æ¸¯æœåŠ¡å™¨

### 4. æˆæœ¬è€ƒè™‘

- åŒ—äº¬æœåŠ¡å™¨å’Œé¦™æ¸¯æœåŠ¡å™¨å¯ä»¥åŒæ—¶è¿è¡Œä¸€æ®µæ—¶é—´
- ç¡®è®¤åŒ—äº¬æœåŠ¡å™¨æ­£å¸¸åŽï¼Œå†é‡Šæ”¾é¦™æ¸¯æœåŠ¡å™¨
- é¿å…æ•°æ®ä¸¢å¤±

### 5. å¤‡æ¡ˆæœŸé—´

- å¤‡æ¡ˆæœŸé—´ï¼ŒæœåŠ¡å™¨å¿…é¡»æ­£å¸¸è¿è¡Œ
- ä¸èƒ½å…³é—­æœåŠ¡å™¨
- ä¸èƒ½æ›´æ¢æœåŠ¡å™¨

---

## ðŸŽ¯ è¿ç§»æ£€æŸ¥æ¸…å•

### è¿ç§»å‰
- [ ] å¤‡ä»½æ‰€æœ‰æ•°æ®
- [ ] è®°å½•å½“å‰æœåŠ¡å™¨é…ç½®
- [ ] å‡†å¤‡åŒ—äº¬æœåŠ¡å™¨
- [ ] é…ç½®å®‰å…¨ç»„

### è¿ç§»ä¸­
- [ ] è¿ç§»é¡¹ç›®ä»£ç 
- [ ] è¿ç§»è§†é¢‘æœåŠ¡å™¨
- [ ] è¿ç§»è§†é¢‘æ–‡ä»¶
- [ ] å®‰è£…ç³»ç»ŸçŽ¯å¢ƒ
- [ ] é…ç½®æœåŠ¡

### è¿ç§»åŽ
- [ ] æ›´æ–°åº”ç”¨ä»£ç ä¸­çš„ IP åœ°å€
- [ ] é‡æ–°ç¼–è¯‘åº”ç”¨
- [ ] æµ‹è¯•æ–°æœåŠ¡å™¨
- [ ] æµ‹è¯•åº”ç”¨åŠŸèƒ½
- [ ] å¼€å§‹å¤‡æ¡ˆæµç¨‹

---

## ðŸ“ž é˜¿é‡Œäº‘æ”¯æŒ

å¦‚æžœè¿ç§»è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š
- é˜¿é‡Œäº‘å·¥å•ç³»ç»Ÿ
- é˜¿é‡Œäº‘æŠ€æœ¯æ”¯æŒï¼š95187
- å¤‡æ¡ˆå’¨è¯¢ï¼šhttps://help.aliyun.com/product/35472.html

---

## ðŸŽ‰ æ€»ç»“

**è¿ç§»æ˜¯å®Œå…¨å¯è¡Œçš„ï¼** ä¸»è¦æ­¥éª¤ï¼š
1. åˆ›å»ºåŒ—äº¬æœåŠ¡å™¨
2. è¿ç§»æ•°æ®å’Œä»£ç 
3. é…ç½®æ–°æœåŠ¡å™¨
4. æ›´æ–°åº”ç”¨ä»£ç 
5. å¼€å§‹å¤‡æ¡ˆæµç¨‹

**å»ºè®®**ï¼š
- å…ˆåˆ›å»ºåŒ—äº¬æœåŠ¡å™¨
- æµ‹è¯•è¿ç§»ä¸€å°éƒ¨åˆ†æ•°æ®
- ç¡®è®¤æ— è¯¯åŽï¼Œå®Œæ•´è¿ç§»
- å¤‡æ¡ˆæœŸé—´ä¿æŒæœåŠ¡å™¨è¿è¡Œ

éœ€è¦æˆ‘å¸®ä½ å‡†å¤‡å…·ä½“çš„è¿ç§»å‘½ä»¤å—ï¼Ÿ



